---
title: AdAttributionKit 的新功能
date: 2025-06-10 15:26:16
categories:
- wwdc2025
tags:
- wwdc2025
- ios
- ipados
- app-store、分发与营销
---
了解 adattributionkit 的新功能，包括如何衡量重叠的重新吸引转化，以及如何为你的 app 自定广告归因规则。深入了解一个新的回传属性，你可以使用这个属性来衡量广告系列在各个国家和地区的实际效果。我们还将展示新的功能，以及用于测试 adattributionkit 实现情况的最佳做法。为了充分从这个讲座中获益，建议你先观看“了解 adattributionkit”。
<!--more-->

![视频封面](https://devimages-cdn.apple.com/wwdc-services/images/3055294D-836B-4513-B7B0-0BC5666246B0/9907/9907_wide_250x141_2x.jpg)
[视频地址](https://developer.apple.com/cn/videos/play/wwdc2025/221/)

# AdAttributionKit 新功能全面解析：从重叠转化到地理数据

## 引言
随着 iOS 18.4 的发布，Apple 为开发者带来了 AdAttributionKit 的一系列重要更新。作为隐私优先的广告归因解决方案，这些新功能将帮助开发者更精准地衡量广告效果，同时保持对用户隐私的最高保护标准。本文将详细介绍这些新特性及其应用场景。

## 核心新功能

### 1. 重叠转化窗口测量
**问题背景**：以往同一时间只能有一个活跃的重新互动转化窗口，导致复杂用户路径难以准确追踪。

**解决方案**：
- 引入转化标签（Conversion Tag）机制，类似书签功能
- 允许同时追踪多个广告带来的转化行为

**技术实现**：
```swift
// 在 Info.plist 中启用功能
<key>EligibleForAdAttributionKitOverlappingConversions</key>
<true/>

// 使用更新API
let update = PostbackUpdate(fineConversionValue: conversionValue,
                          lockPostback: false,
                          conversionTag: conversionTag)
try await Postback.updateConversionValue(update)
```

**应用场景**：用户点击广告A浏览商品，几小时后点击广告B，但最终购买的是广告A的商品——现在可以准确归因。

### 2. 自定义归因规则
**灵活配置选项**：

1. **归因窗口期自定义**
   - 默认值：点击广告30天，浏览广告1天
   - 可针对特定广告网络单独设置
   - 支持完全忽略某类互动（如仅追踪点击广告）

2. **冷却期设置**
   - 防止安装后短时间内重新互动的归因干扰
   - 可分别设置安装和重新互动的冷却时长

**配置示例**（实际使用Info.plist，此处为示意JSON）：
```json
{
  "com.example.adNetwork": {
    "click": 5,  // 5天点击归因窗口
    "view": "ignore"  // 忽略浏览广告
  }
}
```

### 3. 回传地理数据
**新增字段**：国家代码（countryCode）

**数据来源**：
- App Store安装：用户账户国家/地区
- 重新互动：沿用安装时的地理位置
- 替代应用市场：通过安装验证令牌传递

**隐私保护**：
- 采用群体匿名算法
- 仅当同国家转化量达到阈值时才包含在回传中
- 不影响现有数据聚合层级

### 4. 开发者测试工具
**iOS 18.4新功能**：
1. 进入设置 > 开发者 > 广告归因测试
2. 配置应用Bundle ID和测试服务器URL
3. 自定义回传属性（包括国家代码）
4. 手动触发测试回传

**测试回传特征**：
- 使用特殊开发签名密钥（kid值不同）
- 广告网络ID固定为`development.adattributionkit`
- 调试时应用ID可能显示为0

## 最佳实践建议

1. **立即行动项**：
   - 评估现有归因策略，在Info.plist中配置新规则
   - 测试环境验证重叠转化功能
   - SKAdNetwork用户应考虑迁移

2. **升级路径**：
   - 先测试新功能再逐步部署到生产环境
   - 监控归因准确性和回传数据质量

3. **资源利用**：
   - 充分利用新的测试工具缩短开发周期
   - 结合文档优化配置

## 总结
AdAttributionKit 的这些增强功能代表了Apple在隐私保护广告技术领域的最新进展。通过更精细的转化追踪、灵活的规则配置和实用的测试工具，开发者现在能够在不牺牲用户隐私的前提下，获得更全面的广告效果洞察。

## 相关视频
- [将隐私保护融入开发流程](https://developer.apple.com/videos/play/wwdc2025/246)
- [了解 AdAttributionKit](https://developer.apple.com/videos/play/wwdc2024/10060)

## 文档资源
- [AdAttributionKit 主文档](https://developer.apple.com/documentation/AdAttributionKit)
- [归因规则配置指南](https://developer.apple.com/documentation/AdAttributionKit/configuring-attribution-rules-for-your-app)
- [开发者模式测试回传](https://developer.apple.com/documentation/AdAttributionKit/creating-postbacks-in-developer-settings)
- [转化标签使用说明](https://developer.apple.com/documentation/AdAttributionKit/conversion-tags)
> 此文章由AI生成，可能存在错误，如有问题，请联系[djs66256@163.com](djs66256@163.com)