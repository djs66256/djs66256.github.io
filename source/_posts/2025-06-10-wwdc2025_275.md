---
title: 探索 App Intents 中的最新改进
date: 2025-06-10 15:43:56
categories:
- wwdc2025
tags:
- wwdc2025
- ios
- ipados
- macos
- 机器学习与-ai
---
探索今年发布的 app intents 框架新推出的所有增强功能。了解助力日常开发工作的诸多改进 (如延迟属性)、一系列新功能 (如交互式 app intents 摘要片段、实体视图注释)，以及如何整合视觉智能等。我们将一起探索让 app intents 比以往更具表现力、更加流畅易用的各项更新。我们还将介绍今年 app intents 激动人心的新增支持 (如支持“聚焦”和视觉智能)，并讲解如何编写完美适配这些场景的 app intents。
<!--more-->

![视频封面](https://devimages-cdn.apple.com/wwdc-services/images/3055294D-836B-4513-B7B0-0BC5666246B0/9976/9976_wide_250x141_2x.jpg)
[视频地址](https://developer.apple.com/cn/videos/play/wwdc2025/275/)

# App Intents 框架最新进展全面解析

## 引言
App Intents 框架让您的应用功能能够深度集成到系统各处，包括快捷指令、聚焦搜索和视觉智能等场景。本文将详细介绍该框架的最新改进，包括交互式片段、系统集成新特性、用户体验优化和开发便捷 API 等多项内容。

## 交互式片段增强
片段功能现在升级为交互式体验，允许应用在运行 App Intent 时展示定制化视图。

### 核心特性
- 可视化操作结果或请求确认
- 支持实时更新和状态反馈
- 可关联任意 App Intent 操作

### 实现原理
通过新的 SnippetIntent 协议实现，系统会：
1. 用指定值填充片段意图参数
2. 通过查询获取应用实体
3. 运行 perform 方法渲染视图

### 代码示例
```swift
struct ClosestLandmarkIntent: AppIntent {
    func perform() async throws -> some ReturnsValue<LandmarkEntity> & ShowsSnippetIntent & ProvidesDialog {
        let landmark = await self.findClosestLandmark()
        return .result(
            value: landmark,
            dialog: "最近的地标是\(landmark.name)。",
            snippetIntent: LandmarkSnippetIntent(landmark: landmark)
        )
    }
}
```

## 系统集成新特性

### 图像搜索
iOS 26 新增功能允许用户通过相机拍摄或截图直接搜索应用内容。

实现要点：
1. 创建符合 IntentValueQuery 协议的查询结构体
2. 处理 SemanticContentDescriptor 输入
3. 返回匹配的实体数组

### 屏幕实体关联
通过 NSUserActivity 将视图内容与实体关联，实现智能问答功能。

## 用户体验优化

### 撤销支持
通过 UndoableIntent 协议轻松实现操作撤销：
```swift
struct DeleteCollectionIntent: UndoableIntent {
    func perform() async throws -> some IntentResult {
        await undoManager?.registerUndo(withTarget: modelData) {
            $0.restore(collection)
        }
    }
}
```

### 多选项 API
提供替代操作选项，增强用户选择灵活性。

## 开发便捷 API

### 延迟属性
使用 @DeferredProperty 按需执行耗时操作：
```swift
@DeferredProperty
var crowdStatus: Int {
    get async throws { await modelData.getCrowdStatus(self) }
}
```

### Swift Packages 支持
现在可将 App Intents 代码放入 Swift Packages 和静态库中。

## 结语
App Intents 框架通过这一系列新功能和改进，为开发者提供了更强大的系统集成能力和更流畅的用户体验实现方案。建议开发者尝试交互式片段、屏幕实体关联等新特性，并参考官方文档和示例项目。

## 相关视频
- [了解 App Intents](https://developer.apple.com/videos/play/wwdc2025/244)
- [使用 App Intents 针对"快捷指令"和"聚焦"进行开发](https://developer.apple.com/videos/play/wwdc2025/260)
- [设计交互式摘要卡片](https://developer.apple.com/videos/play/wwdc2025/281)

## 文档
- [App Intents](https://developer.apple.com/documentation/AppIntents)
- [App Shortcuts](https://developer.apple.com/documentation/AppIntents/app-shortcuts)
- [Creating your first app intent](https://developer.apple.com/documentation/AppIntents/Creating-your-first-app-intent)
> 此文章由AI生成，可能存在错误，如有问题，请联系[djs66256@163.com](djs66256@163.com)