---
title: “钱包”的新功能
date: 2025-06-10 15:26:19
categories:
- wwdc2025
tags:
- wwdc2025
- ios
- ipados
- macos
- visionos
- watchos
- app-服务
---
了解“钱包”中的最新功能和改进。我们将介绍如何以惊艳的全新设计更新你的登机牌，并探索适用于多场次活动门票的新功能。我们还将讨论有助于你将凭证无缝添加到“钱包”中的 api 更新。
<!--more-->

![视频封面](https://devimages-cdn.apple.com/wwdc-services/images/3055294D-836B-4513-B7B0-0BC5666246B0/9874/9874_wide_250x141_2x.jpg)
[视频地址](https://developer.apple.com/cn/videos/play/wwdc2025/202/)

# 钱包应用全新升级：多场次活动与智能登机牌解析

## 引言
苹果钱包应用在最新版本中带来了多项创新功能，从支持多场次活动的门票到全面升级的登机牌体验，以及更加便捷的通行证添加API。这些改进将显著提升用户使用体验，同时为开发者提供了更强大的工具。本文将深入解析这些新特性，帮助您快速掌握并应用到实际开发中。

## 多场次活动门票功能

### 功能概述
今年的钱包应用推出了"后续活动"功能，允许用户通过一张门票访问多个活动场次。这一功能基于iOS 18引入的海报活动门票语义体系实现，为用户提供了更加连贯的活动体验。

### 技术实现细节
在pass.json配置文件中，"后续活动"信息定义在新的"upcomingPassInformation"数组中：
```json
{
  "upcomingPassInformation": [
    {
      "type": "event",
      "identifier": "unique_event_id",
      "name": "Event Name",
      "date": "2024-07-15"
    }
  ]
}
```

每个后续活动对象包含以下关键字段：
- 类型(type)必须为"event"
- 唯一标识符(identifier)
- 活动名称(name)
- 活动日期(date)

### 活动详情页配置
活动详情页继承了海报活动门票的设计理念，支持以下配置项：

1. **头图展示**：默认使用通行证背景图，也可通过"headerImage"指定自定义图片
2. **场馆信息**：通过语义字段"venueName"、"venuePlaceID"和"venueLocation"添加
3. **活动指南**：可配置常用操作按钮、天气卡片、场馆地图等

值得注意的是，后续活动与通行证结构相同但不会复用通行证属性。开发者需要在后续活动对象中重复定义所有需要的属性。

## 登机牌全面升级

### 核心改进
新版登机牌带来了多项重大改进：

1. **航班追踪系统**：自动订阅航班状态变更
2. **深度系统集成**：与地图导航和"查找"行李追踪无缝对接
3. **航空公司服务专区**：集中展示乘机全流程可操作事项
4. **徽章系统**：突出显示票务等级、行李限额等重要信息
5. **智能时间管理**：基于语义字段自动计算并维持值机时长

### 配置建议
```json
{
  "semantics": {
    "airlineCode": "AA",
    "flightNumber": "123",
    "originalDepartureDate": "2024-07-15T08:00:00"
  },
  "serviceURLs": {
    "lounge": "https://example.com/lounge",
    "upgrade": "https://example.com/upgrade"
  }
}
```

重要配置提示：
- 使用airlineCode+flightNumber+originalDepartureDate语义组合启动航班追踪
- 代码共享航班优先提供市场方航班号
- 仅当航班正式改期时才更新originalDepartureDate
- 在pass.json顶层定义服务URL

## 自动添加通行证API

### 新版PKPassLibrary API
全新PKPassLibrary API简化了通行证添加流程，主要包含三个步骤：

```swift
// 1. 请求权限
PKPassLibrary.requestAuthorization()

// 2. 检查状态
let status = PKPassLibrary.authorizationStatus

// 3. 添加通行证
PKPassLibrary.addPasses([pass1, pass2])
```

### 注意事项
- 权限请求仅生效一次，后续调用直接返回当前状态
- 用户可在系统设置中随时修改授权状态
- 开发者应保持对旧版系统的兼容性

## 结论

苹果钱包应用的最新升级带来了更加灵活的活动门票管理、更智能的登机牌体验以及更便捷的API集成方式。这些改进不仅提升了用户体验，也为开发者提供了更多可能性。建议开发者尽快熟悉这些新特性，为用户提供更加无缝的钱包应用体验。

## 相关视频
- [Apple Pay 的新功能](https://developer.apple.com/videos/play/wwdc2025/201)
- [「钱包」和 Apple Pay 的新功能](https://developer.apple.com/videos/play/wwdc2024/10108)

## 文档资源
- [Human Interface Guidelines: Wallet](https://developer.apple.com/design/human-interface-guidelines/wallet)
- [PassKit (Apple Pay and Wallet)](https://developer.apple.com/documentation/PassKit)
> 此文章由AI生成，可能存在错误，如有问题，请联系[djs66256@163.com](djs66256@163.com)