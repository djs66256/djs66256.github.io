---
title: “钱包”的新功能
date: 2025-06-10 21:46:47
categories:
- wwdc2025
tags:
- wwdc2025
- ios
- ipados
- macos
- visionos
- watchos
- app-服务
---
了解“钱包”中的最新功能和改进。我们将介绍如何以惊艳的全新设计更新你的登机牌，并探索适用于多场次活动门票的新功能。我们还将讨论有助于你将凭证无缝添加到“钱包”中的 api 更新。
<!--more-->

![视频封面](https://devimages-cdn.apple.com/wwdc-services/images/3055294D-836B-4513-B7B0-0BC5666246B0/9874/9874_wide_250x141_2x.jpg)
[视频地址](https://developer.apple.com/cn/videos/play/wwdc2025/202/)
> 此文章由AI生成，可能存在错误，如有问题，请联系[djs66256@163.com](djs66256@163.com)

# 钱包新功能：全面升级的活动票证与登机牌体验

苹果钱包应用在WWDC24上迎来多项重要更新，包括增强型活动票证、全新设计的登机牌以及更便捷的凭证添加API。这些改进将为用户带来更丰富的使用体验，同时为开发者提供更强大的工具。

## 活动票证的后续活动功能

今年钱包应用对活动票证进行了重大升级，引入了"后续活动"特性。这一功能允许用户通过单张票证访问多场关联活动，解决了以往需要多张独立票证的痛点。

### 技术实现细节

后续活动功能通过pass.json文件中的新数组`upcomingPassInformation`实现配置。开发者需要在数组中为每场活动定义对象，包含类型(`event`)、唯一标识符、显示名称和日期等必要字段。该功能充分利用了iOS 18引入的海报活动票证语义机制。

```swift
"upcomingPassInformation": [
    {
        "type": "event",
        "identifier": "unique_id_123",
        "displayName": "Summer Concert Series - Night 2",
        "date": "2024-07-15T20:00:00"
    }
]
```

每个后续活动对象支持完整的票证语义结构，包括：
- `semantics`对象：描述活动的语义信息
- `additionalInfoFields`/`backFields`：未被语义覆盖的自定义属性
- `URLs`对象：分组所有活动相关操作
- `images`对象：配置活动关联图像

值得注意的是，后续活动不会自动复用主票证的属性。开发者需要为每个活动单独配置相关内容，包括自定义横幅图像(`headerImage`)、场地信息(`venueName`、`venuePlaceID`、`venueLocation`)和活动指南等。

## 登机牌的全面升级

钱包中的登机牌体验今年迎来重大革新，新设计更具动态性和可配置性，并与苹果生态系统深度集成。

### 核心改进特性

1. **实时航班追踪**：与苹果航班服务自动同步，更新登机口变更、延误等信息
2. **系统深度集成**：地图提供机场路线指引，"查找"功能追踪行李
3. **航空公司服务版块**：显示旅客全程可采取的操作及相关信息摘要
4. **智能徽章系统**：自动显示最重要的信息，如舱位等级、行李资格等

### 技术配置要点

升级版登机牌通过语义识别航班信息，核心语义包括：
- `airlineCode`：航空公司代码
- `flightNumber`：航班号
- `originalDepartureDate`：原始出发日期
- `currentBoardingDate`：当前登机时间

徽章功能支持IATA特殊服务请求代码，通过`passengerServiceSSRs`语义实现。开发者还可使用自定义语义控制航空公司特有信息的标签。

```swift
"semantics": {
    "passengerServiceSSRs": ["SVAN", "WCHR"],
    "seatClass": "Business",
    "airlineStatus": "Gold"
}
```

## 自动添加凭证API

针对频繁添加凭证的用户，今年推出了新的PKPassLibrary API，支持后台自动添加功能。

### 实现步骤

1. **请求权限**：使用`requestAuthorization(for: .backgroundAddPasses)`请求后台添加权限
2. **检查状态**：通过`authorizationStatus(for:)`检查当前授权状态
3. **添加凭证**：授权后使用`addPasses`方法自动添加凭证

```swift
Task {
    await PKPassLibrary.shared.requestAuthorization(for: .backgroundAddPasses)
}
```

## 兼容性与最佳实践

虽然新功能强大，开发者仍需考虑以下兼容性要点：
- 升级版登机牌功能仅支持最新iOS和watchOS设备
- 应继续在现有登机牌中添加语义和URL，确保旧系统用户也能获得良好体验
- 后续活动功能需要iOS 18及以上版本支持

对于活动票证，建议定期更新`isActive`属性，及时移除已取消或不相关的活动，确保列表信息的准确性。

## 开发资源

开发者可以访问以下资源获取更多详细信息：
- 人机界面指南：钱包
- PassKit(Apple Pay和Wallet)文档
- 相关WWDC视频讲解

这些钱包新功能将为用户带来更加无缝、智能的体验，同时也为开发者提供了更丰富的工具来创建出色的凭证解决方案。通过合理利用这些新特性，应用可以显著提升用户满意度和参与度。

## 相关视频

[Apple Pay 的新功能](https://developer.apple.com/videos/play/wwdc2025/201)
[“钱包”和 Apple Pay 的新功能](https://developer.apple.com/videos/play/wwdc2024/10108)

## 文档

[人机界面指南：钱包](https://developer.apple.com/design/human-interface-guidelines/wallet)
[PassKit (Apple Pay 和 Wallet)](https://developer.apple.com/documentation/PassKit)
