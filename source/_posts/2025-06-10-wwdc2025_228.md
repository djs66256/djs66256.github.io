---
title: 借助 Wi-Fi Aware 增强设备连接性能
date: 2025-06-10 21:46:48
categories:
- wwdc2025
tags:
- wwdc2025
- ios
- ipados
- macos
- tvos
- visionos
- watchos
- 隐私与安全
---
了解如何使用 wi-fi aware 建立对等网络连接。我们还将介绍如何以带宽更高、延迟更低的网络连接性能实时共享视频、传输大文件，以及操控配件。此外，你将了解如何借助 devicediscoveryui、accessorysetupkit 和 network 框架，在自己的 app 中使用 wi-fi aware。
<!--more-->

![视频封面](https://devimages-cdn.apple.com/wwdc-services/images/3055294D-836B-4513-B7B0-0BC5666246B0/9922/9922_wide_250x141_2x.jpg)
[视频地址](https://developer.apple.com/cn/videos/play/wwdc2025/228/)
> 此文章由AI生成，可能存在错误，如有问题，请联系[djs66256@163.com](djs66256@163.com)

# 通过 Wi-Fi Aware 实现高效设备间通信

## 概述

在 WWDC 演讲中，苹果详细介绍了其最新推出的 Wi-Fi Aware 框架，该技术为 iOS 设备间的点对点通信提供了全新的解决方案。Wi-Fi Aware 允许设备之间建立高带宽、低延迟的直接连接，无需依赖路由器或互联网接入点，同时保持高安全性标准。本文将深入剖析该技术的实现原理与应用场景。

## 技术特性

Wi-Fi Aware 技术具有以下显著优势：

- **直接通信**：设备间可建立点对点连接，不依赖任何中间设备
- **并行工作**：可同时保持常规 Wi-Fi 网络连接
- **高安全性**：全链路采用认证加密机制
- **高吞吐量**：支持大文件快速传输
- **低延迟**：适合实时媒体传输场景

该技术基于 Wi-Fi 联盟制定的全球标准，确保不同厂商设备间的互操作性。典型应用场景包括媒体共享、配件控制、多人协作等，这些功能可同时运行而不相互干扰。

## 实现流程

### 服务配置

Wi-Fi Aware 采用服务发现机制，每个服务由特定格式的名称标识：

```swift
_服务名._协议
```

开发者需要在应用的 Info.plist 文件中声明支持的服务类型，示例如下：

```swift
<key>WiFiAwareServices</key>
<dict>
    <key>_file-service._tcp</key>
    <dict>
        <key>Publishable</key>
        <true/>
        <key>Subscribable</key>
        <true/>
    </dict>
</dict>
```

服务名称需遵循特定规范：不超过15个字符，仅包含字母、数字和连字符。建议在IANA注册服务名称以避免冲突。

### 设备配对

配对过程分为三个关键步骤：

1. 从周边设备列表中选择目标设备
2. 输入对方显示的PIN码进行授权
3. 系统自动完成安全配对流程

苹果提供了两种配对方案：

- `DeviceDiscoveryUI`：适用于应用间的连接场景
- `AccessorySetupKit`：针对硬件配件优化的配对方案，支持多协议同时配对

以下是使用DeviceDiscoveryUI的代码示例：

```swift
// 发布方
DevicePairingView(.wifiAware(.connecting(to: .fileService, from: .selected([])))) {
    // 前置视图
}

// 订阅方
DevicePicker(.wifiAware(.connecting(to: .selected([]), from: .fileService))) { endpoint in
    // 处理配对端点
}
```

### 连接建立

完整的连接流程分为四个阶段：

1. 发布方启动监听服务
2. 订阅方扫描周边可用的服务设备
3. 系统提供可连接的端点信息
4. 应用建立实际的网络连接

关键实现代码如下：

```swift
// 发布方监听
let listener = try NetworkListener(for: 
    .wifiAware(.connecting(to: .fileService, from: .matching(deviceFilter)))

// 订阅方连接
let connection = NetworkConnection(to: endpoint, using: .parameters {
    TLS()
})
```

## 性能优化

Wi-Fi Aware 提供了精细的性能调节选项：

### 性能模式

- `Bulk`：默认模式，以节能为主要目标
- `Realtime`：优先保证低延迟

### 服务等级

- `Background`：后台任务
- `BestEffort`：默认平衡模式
- `InteractiveVideo/Voice`：实时交互应用

配置示例：

```swift
.wifiAware { $0.performanceMode = .realtime }
.serviceClass(.interactiveVideo)
```

开发者可以获取性能报告来监控连接质量：

```swift
let report = connection.currentPath?.wifiAware?.performance
```

## 总结

Wi-Fi Aware 框架为 iOS 设备间的直接通信提供了标准化、高性能的解决方案。通过简单的API集成，开发者即可为应用添加高效的设备间通信能力。该技术特别适合需要高带宽、低延迟的实时交互场景，同时保证了通信过程的安全性和可靠性。

## 相关资源

### 相关视频

[了解 AccessorySetupKit](https://developer.apple.com/videos/play/wwdc2024/10203)

### 文档资源

[Wi-Fi Aware](https://developer.apple.com/documentation/WiFiAware)
