---
title: 搭配使用更出色：SwiftUI 和 RealityKit
date: 2025-06-10 21:46:48
categories:
- wwdc2025
tags:
- wwdc2025
- ios
- ipados
- macos
- tvos
- visionos
- 设计
---
了解如何在 visionos 26 中无缝整合 swiftui 和 realitykit 的强大功能。我们将探索 model3d 的增强功能 (包括动画和 configurationcatalog 支持)，并展示如何顺利过渡到 realityview。你将了解如何借助 swiftui 动画实现 realitykit 组件更改、实现交互式操控、使用新增 swiftui 组件打造更丰富的互动体验，以及从 swiftui 代码中观察 realitykit 的变化。我们还将介绍如何利用统一坐标转换进行跨框架坐标变换。
<!--more-->

![视频封面](https://devimages-cdn.apple.com/wwdc-services/images/3055294D-836B-4513-B7B0-0BC5666246B0/9990/9990_wide_250x141_2x.jpg)
[视频地址](https://developer.apple.com/cn/videos/play/wwdc2025/274/)
> 此文章由AI生成，可能存在错误，如有问题，请联系[djs66256@163.com](djs66256@163.com)

# SwiftUI 与 RealityKit 的无缝协作：visionOS 26 的新特性解析

在 visionOS 26 中，Apple 进一步强化了 SwiftUI 与 RealityKit 之间的协作能力，为开发者提供了更流畅的 2D 与 3D 内容整合方案。本文将详细介绍这些新特性及其应用场景。

## Model3D 的增强功能

作为 SwiftUI 家族的 3D 内容展示组件，Model3D 在 visionOS 26 中获得了两项重要升级：

**动画播放支持**
开发者现在可以通过 Model3DAsset 加载场景资源并创建 AnimationPlaybackController 来控制动画播放。更值得注意的是，AnimationPlaybackController 现在支持 Observable 协议，使得 SwiftUI 视图能够实时响应动画状态变化。

**ConfigurationCatalog 支持**
这项新功能允许开发者轻松切换 3D 模型的不同配置样式，只需通过弹出菜单选择即可实现模型的"换装"效果，大大简化了多样式 3D 内容的展示流程。

## 从 Model3D 到 RealityView 的平滑过渡

当需求超出 Model3D 的能力范围时，开发者可以平滑过渡到功能更强大的 RealityView：

1. 只需将视图类型改为 RealityView
2. 在 make 闭包中加载模型实体
3. 使用 `.realityViewLayoutBehavior(.fixedSize)` 修饰符保持视图的自适应特性

这种过渡特别适合需要添加粒子系统(ParticleEmitterComponent)等高级特效的场景。通过 RealityKit 的"实体组件系统"架构，开发者可以实现精细的 3D 交互效果。

## 对象操控 API

visionOS 26 引入了全新的 Object Manipulation API，支持以下交互方式：

- 单手移动
- 单手/双手旋转
- 双指缩放
- 两手间传递对象

对于不同类型的对象，启用方式有所不同：
- SwiftUI 视图：添加 `.manipulable` 修饰符
- RealityKit 实体：使用 `ManipulationComponent.configureEntity()` 方法

该 API 自动处理碰撞检测、输入响应和悬停效果，开发者只需关注交互逻辑的实现。

## 三大新增 SwiftUI 组件

为深化交互体验，visionOS 26 提供了三个关键组件：

1. `ViewAttachmentComponent`：将 SwiftUI 视图直接附加到实体
2. `GestureComponent`：让实体响应触控手势
3. `PresentationComponent`：在 3D 场景中呈现 SwiftUI 弹窗

这些组件大幅简化了 3D 场景中 2D 交互元素的集成过程。

## 双向数据流动与坐标转换

visionOS 26 实现了 SwiftUI 与 RealityKit 之间的双向数据通信：

- SwiftUI → RealityKit：通过 RealityView 的 update 闭包
- RealityKit → SwiftUI：通过观察实体属性

新增的 `CoordinateSpace3D` 协议解决了跨框架坐标转换的难题，开发者可以轻松计算不同坐标系下对象间的距离和相对位置。

## SwiftUI 动画驱动 RealityKit 组件

现在，SwiftUI 动画可以隐式驱动 RealityKit 组件的变化，有两种实现方式：

1. 在 RealityView 的 `content.animate()` 块中设置组件新值
2. 调用 `Entity.animate()` 方法并传递 SwiftUI 动画

这种集成特别适合创建生动的交互反馈效果，如弹性动画等。

## 总结

visionOS 26 中 SwiftUI 与 RealityKit 的深度合作为开发者提供了前所未有的 2D/3D 内容整合能力。从简单的 Model3D 展示到复杂的 RealityView 交互，从基础动画到高级粒子效果，这套工具链能满足各种空间计算应用的需求。建议开发者根据具体场景选择合适的技术组合：

- 简单 3D 内容展示：Model3D
- 复杂交互式 3D 内容：RealityView
- 2D/3D 混合交互：新增 SwiftUI 组件

通过合理利用这些新特性，开发者可以创造出更加沉浸式和交互式的空间应用体验。

## 相关视频

[在 Reality Composer Pro 中编写交互式 3D 内容](https://developer.apple.com/videos/play/wwdc2024/10102)  
[探索 SwiftUI 中的观察](https://developer.apple.com/videos/play/wwdc2023/10149)  
[深入了解 RealityKit 2](https://developer.apple.com/videos/play/wwdc2021/10074)  
[SwiftUI 中的数据要素](https://developer.apple.com/videos/play/wwdc2020/10040)
