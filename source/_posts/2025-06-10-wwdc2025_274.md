---
title: 搭配使用更出色：SwiftUI 和 RealityKit
date: 2025-06-10 15:50:33
categories:
- wwdc2025
tags:
- wwdc2025
- ios
- ipados
- macos
- tvos
- visionos
- 设计
---
了解如何在 visionos 26 中无缝整合 swiftui 和 realitykit 的强大功能。我们将探索 model3d 的增强功能 (包括动画和 configurationcatalog 支持)，并展示如何顺利过渡到 realityview。你将了解如何借助 swiftui 动画实现 realitykit 组件更改、实现交互式操控、使用新增 swiftui 组件打造更丰富的互动体验，以及从 swiftui 代码中观察 realitykit 的变化。我们还将介绍如何利用统一坐标转换进行跨框架坐标变换。
<!--more-->

![视频封面](https://devimages-cdn.apple.com/wwdc-services/images/3055294D-836B-4513-B7B0-0BC5666246B0/9990/9990_wide_250x141_2x.jpg)
[视频地址](https://developer.apple.com/cn/videos/play/wwdc2025/274/)

# SwiftUI与RealityKit的完美融合：visionOS 26新特性详解

## 引言
在visionOS 26中，Apple为开发者带来了SwiftUI与RealityKit深度融合的全新体验。这两个强大的框架如今能够无缝协作，让开发者轻松构建融合传统UI与交互式3D内容的应用程序。本文将详细介绍这些激动人心的新特性。

## Model3D增强功能
Model3D现在支持两大关键功能：

1. **动画支持**
   - 通过Model3DAsset加载3D模型并控制动画
   - 使用`selectedAnimation`选择特定动画片段
   - 通过`AnimationPlaybackController`控制播放进度

2. **ConfigurationCatalog**
   - 轻松切换模型的多个预置配置版本
   - 艺术家可以直接准备不同造型配置

## 平滑过渡到RealityView
当需要更多高级功能时，可以无缝切换到RealityView：

- **布局模式选择**：
  - `.flexible`：填充可用空间
  - `.centered`：内容居中显示
  - `.fixedSize`：精确匹配模型边界

- **粒子系统集成**：
  1. 创建不可见实体作为容器
  2. 添加`ParticleEmitterComponent`
  3. 调整发射方向
  4. 实现丰富的视觉效果

## 对象操控新体验
visionOS 26引入了全新的Object Manipulation API：

```swift
Model3D(...)
    .manipulable([.move, .rotate], inertia: .high)
```

- 自动添加碰撞、输入目标和悬停特效组件
- 支持订阅操控事件(开始/停止/传递)
- 可自定义交互反馈效果

## SwiftUI组件深度整合
三大新型组件架起桥梁：

1. **ViewAttachmentComponent** - 将SwiftUI视图绑定到实体
2. **GestureComponent** - 让实体响应手势
3. **PresentationComponent** - 从实体触发SwiftUI弹窗

## 双向数据流
RealityKit实体现在可以作为可观察对象：

- 监听变换属性(位置/旋转/缩放)
- 追踪组件变化
- 驱动SwiftUI视图更新
- 注意避免在`update`闭包中修改观察属性

## 统一坐标转换
新的`CoordinateSpace3D`协议消除了框架间的坐标壁垒：

1. 获取Model3D的坐标空间
2. 转换为RealityKit实体坐标
3. 实现精确的空间计算

## SwiftUI动画驱动
通过`animate`闭包可以：

- 驱动实体变换动画
- 控制音频/模型/灯光属性过渡
- 结合操控API实现弹性效果

两种实现方式：
```swift
// 方式一
content.animate {
    entity.position.x = newValue
}

// 方式二
entity.animate(with: .bouncy) {
    $0.transform = .identity
}
```

## 结论
visionOS 26为SwiftUI和RealityKit的协同工作带来了革命性的改进。从简单的3D模型展示到复杂的交互式体验，开发者现在拥有了更强大、更灵活的工具集。期待看到开发者们利用这些新特性创造出令人惊叹的空间计算应用！

## 相关视频
- [在Reality Composer Pro中编写交互式3D内容](https://developer.apple.com/videos/play/wwdc2024/10102)
- [探索SwiftUI中的观察](https://developer.apple.com/videos/play/wwdc2023/10149)
- [深入了解RealityKit 2](https://developer.apple.com/videos/play/wwdc2021/10074)
- [SwiftUI中的数据要素](https://developer.apple.com/videos/play/wwdc2020/10040)
> 此文章由AI生成，可能存在错误，如有问题，请联系[djs66256@163.com](djs66256@163.com)