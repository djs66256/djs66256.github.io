---
title: 深入探索 MapKit
date: 2025-06-10 15:38:45
categories:
- wwdc2025
tags:
- wwdc2025
- ios
- ipados
- macos
- tvos
- visionos
- watchos
- 地图和位置
---
了解 mapkit 和 mapkit js 的最新更新。我们将介绍一种新的路线类型——骑行路线，并向你展示如何在网页上启用 3d 环视图像。了解新的 geocoding api 如何支持坐标与地址之间的转换，以及如何使用 address representations api 来获取某一区域最恰当的地址。最后，我们将介绍一种新的地点引用方式，确保你的 app 能与 app intents 无缝协作。
<!--more-->

![视频封面](https://devimages-cdn.apple.com/wwdc-services/images/3055294D-836B-4513-B7B0-0BC5666246B0/9878/9878_wide_250x141_2x.jpg)
[视频地址](https://developer.apple.com/cn/videos/play/wwdc2025/204/)

# 探索 MapKit 最新功能：骑行路线、3D环视与地理编码升级  

## 引言  
Apple 地图正在不断进化！MapKit 和 MapKit JS 迎来了多项激动人心的更新，包括全新的骑行路线、3D环视图像支持、升级版地理编码 API 等。这些功能将帮助开发者构建更强大的位置服务应用和网站。让我们一起来看看这些新特性如何改变用户体验。

## PlaceDescriptor：地点引用的新方式  

### 为什么需要 PlaceDescriptor  
传统 Place ID 虽然有效，但在某些场景下并不理想：  
- 当系统仅提供营业点名称和地址时  
- 需要跨框架/应用协作时  
- 传递地点引用给非 MapKit 环境时  

### PlaceDescriptor 三大要素  
1. **commonName**：使用广为人知的名称  
2. **representations 数组**：必须包含至少一种地理信息表达方式  
3. **supportingRepresentations 数组**：可选字段，支持服务标识符  

```swift
// 创建 PlaceDescriptor 示例
let descriptor = PlaceDescriptor(
    representations: [.coordinate(coordinates)],
    commonName: "帝国大厦"
)
```

## 地理编码技术升级  

### 主要变化  
- 从 CoreLocation 迁移至 MapKit  
- 新增智能地址格式功能  

```swift
// 反向地理编码示例
let request = MKReverseGeocodingRequest(location: photoLocation)
if let mapItems = try await request?.mapItems {
    photoContext = mapItems.first?.address?.cityWithContext
}
```

## 导航功能增强  

### 骑行路线支持  
新增的骑行路线功能会自动避开机动车道，优选绿道：  

```swift
request.transportType = .cycling
let route = try await MKDirections(request: request).calculate()
MapPolyline(route).stroke(.blue, lineWidth: 5)
```

### 3D环视功能  
MapKit JS 现在支持：  
- 交互式环视视图  
- 静态预览图  

```javascript
new mapkit.LookAround(containerElement, place, {
    showsDialogControl: true
})
```

## 结论与行动指南  

### 立即行动  
1. 使用 PlaceDescriptor 实现灵活的地点引用  
2. 更新 Apple Maps 链接格式  
3. 迁移至新版地理编码 API  
4. 为应用添加骑行导航和3D环视功能  

这些新功能将显著提升您应用的位置服务体验，帮助用户更好地探索世界。

## 相关视频  
- [使用 MapKit 充分优化位置相关功能](https://developer.apple.com/videos/play/wwdc2024/10097)  
- [认识 SwiftUI 版 MapKit](https://developer.apple.com/videos/play/wwdc2023/10043)  
- [MapKit 的新功能](https://developer.apple.com/videos/play/wwdc2022/10035)  

## 文档  
- [Adopting unified Maps URLs](https://developer.apple.com/documentation/MapKit/Unified-Map-URLs)
> 此文章由AI生成，可能存在错误，如有问题，请联系[djs66256@163.com](djs66256@163.com)