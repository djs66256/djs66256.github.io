---
title: 了解 Foundation Models 框架
date: 2025-06-10 21:46:48
categories:
- wwdc2025
tags:
- wwdc2025
- ios
- ipados
- macos
- 机器学习与-ai
---
了解如何利用 apple 智能背后的设备端大语言模型！这个简介讲座涵盖了丰富的主题，从用于生成 swift 数据结构并结合流式传输实现灵敏响应体验的引导式生成功能，到用于整合数据源和会话以进行上下文管理的工具调用机制，应有尽有。这个讲座不设任何先决条件。
<!--more-->

![视频封面](https://devimages-cdn.apple.com/wwdc-services/images/3055294D-836B-4513-B7B0-0BC5666246B0/9965/9965_wide_250x141_2x.jpg)
[视频地址](https://developer.apple.com/cn/videos/play/wwdc2025/286/)
> 此文章由AI生成，可能存在错误，如有问题，请联系[djs66256@163.com](djs66256@163.com)

# 探索 Foundation Models 框架：设备端大语言模型的力量

在2025年WWDC大会上，Apple推出了全新的Foundation Models框架，为开发者提供了访问设备端大语言模型的强大工具。本文将深入解析这个创新框架的关键功能和特性。

## 框架概述

Foundation Models框架通过简洁强大的Swift API，让开发者能够在macOS、iOS、iPadOS和visionOS平台上访问驱动Apple智能的设备端大语言模型。该框架特别适用于内容生成、文本摘要和用户输入分析等任务。

所有数据处理都在设备端完成，确保了用户隐私安全，并支持离线运行。由于直接内置在操作系统中，该框架不会增加应用体积，为开发者提供了轻量级的AI解决方案。

## 核心功能解析

### 模型能力与限制

Foundation Models框架搭载的设备端模型是一个拥有30亿参数的大语言模型，每个参数量化到2比特。虽然比操作系统内其他模型规模大几个数量级，但它仍是专为设备优化的模型：

- 擅长摘要生成、信息提取、分类等任务
- 不适用于需要世界知识或复杂推理的任务
- 需要将复杂任务分解为更小单元处理

开发者可以通过Xcode Playground快速测试模型响应：

```swift
import FoundationModels
import Playgrounds

#Playground {
    let session = LanguageModelSession()
    let response = try await session.respond(to: "What's a good name for a trip to Japan? Respond only with a title")
}
```

### 引导式生成技术

传统大语言模型输出非结构化内容，难以直接映射到应用界面。Foundation Models的引导式生成技术解决了这一问题：

```swift
@Generable
struct SearchSuggestions {
    @Guide(description: "建议搜索词列表", .count(4))
    var searchTerms: [String]
}

let response = try await session.respond(
    to: "为一个关于游览著名地标的应用生成建议搜索词列表。",
    generating: SearchSuggestions.self
)
```

@Generable宏允许开发者定义期望的Swift数据结构，@Guide则通过自然语言描述属性。这种方法不仅简化了提示词设计，还通过约束解码技术保证了输出结构正确性。

### 快照流式传输

不同于传统的增量流式传输，Foundation Models采用快照流式传输技术，特别适合结构化输出场景：

```swift
let stream = session.streamResponse(
    to: "制定3天富士山旅行计划。",
    generating: Itinerary.self
)

for try await partial in stream {
    print(partial)
}
```

每个快照都表示部分生成的响应，所有属性都是可选的，随着模型生成更多内容而逐步填充。这种方法与SwiftUI等声明式框架完美配合，实现流畅的用户体验。

## 高级功能

### 工具调用机制

工具调用让模型能够执行开发者在应用中定义的代码，扩展了模型能力：

```swift
struct WeatherTool: Tool {
    static let name = "weather_tool"
    static let description = "获取指定城市的当前温度"
    
    struct Parameters: Generable {
        var city: String
    }
    
    func call(_ parameters: Parameters) async throws -> ToolOutput {
        let temperature = try await getTemperature(for: parameters.city)
        return ToolOutput(.generated(Weather(temperature: temperature)))
    }
}
```

定义工具后，只需将其传入会话初始化方法，模型就能自主决定何时调用这些工具。

### 有状态会话管理

Foundation Models框架围绕有状态会话构建，支持多轮对话上下文跟踪：

```swift
let session = LanguageModelSession(
    model: .default,
    instructions: "你是一个专业旅行规划助手，回答应简洁专业。"
)
```

会话对象的transcript属性记录所有交互历史，isResponding属性则指示模型是否正在生成响应，帮助开发者管理交互流程。

## 开发者工具与体验

Apple为Foundation Models框架提供了完善的开发支持：

- Xcode Playground宏快速迭代提示词
- Instruments应用分析模板优化模型请求延迟
- Feedback Assistant反馈渠道帮助改进模型和API
- 适配器训练工具包支持高度专业化用例

```swift
#Playground {
    let session = LanguageModelSession()
    for landmark in ModelData.shared.landmarks {
        let response = try await session.respond(to: "What's a good name for a trip to \(landmark.name)? Respond only with a title")
    }
}
```

## 总结与展望

Foundation Models框架代表了设备端AI技术的重大突破，通过Swift友好的API将大语言模型能力带给Apple平台开发者。其核心创新包括：

1. 引导式生成确保结构化输出
2. 快照流式传输优化用户体验
3. 工具调用扩展模型能力
4. 有状态会话支持复杂交互

随着开发者社区开始采用这一框架，预计将涌现大量创新应用场景，从个性化辅助到实时内容生成。Apple也承诺将持续优化模型性能，并通过开发者反馈改进框架功能。

# 相关视频

[探索 Apple 平台上的机器学习和 AI 框架](https://developer.apple.com/videos/play/wwdc2025/360)
[探索设备端基础模型的提示设计和安全](https://developer.apple.com/videos/play/wwdc2025/248)
[深入了解 Foundation Models 框架](https://developer.apple.com/videos/play/wwdc2025/301)
[跟着视频学编程：使用 Foundation Models 框架将设备端 AI 引入你的 App](https://developer.apple.com/videos/play/wwdc2025/259)
# 文档

[人机界面指南：生成式 AI](https://developer.apple.com/design/human-interface-guidelines/generative-ai)
