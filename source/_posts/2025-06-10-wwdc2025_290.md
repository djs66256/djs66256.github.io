---
title: 借助 SwiftUI 在 visionOS 中设置场景
date: 2025-06-10 15:50:59
categories:
- wwdc2025
tags:
- wwdc2025
- visionos
- 设计
---
探索精彩的全新 api，为你的 visionos app 打造更出色的窗口、空间容器和沉浸式空间。微调场景在重新启动或固定位置时的行为。通过裁剪边缘和对齐，根据周边环境来调整空间容器。将流媒体格式的沉浸式内容从 mac 传输到 apple vision pro。借助空间容器和沉浸式空间，让基于 uikit 的现有 app 更上一层楼。
<!--more-->

![视频封面](https://devimages-cdn.apple.com/wwdc-services/images/3055294D-836B-4513-B7B0-0BC5666246B0/9991/9991_wide_250x141_2x.jpg)
[视频地址](https://developer.apple.com/cn/videos/play/wwdc2025/290/)

# 探索 visionOS 26 全新场景 API：打造沉浸式空间体验

## 引言
随着 visionOS 26 的发布，Apple 为开发者带来了全新的场景构建能力。无论是窗口、空间容器还是沉浸式空间，现在都能通过创新的 API 实现更精细的控制和更自然的交互体验。本文将深入解析这些新特性，助你为 Apple Vision Pro 打造更出色的应用。

## 场景生命周期管理

### 恢复与锁定功能
visionOS 26 引入了场景恢复功能，用户可以将窗口或空间容器锁定到特定物理位置。当用户返回该空间时，系统会自动恢复所有锁定内容。

对于需要禁用恢复的场景（如临时窗口），SwiftUI 开发者可以使用：
```swift
WindowGroup("Tools") {
    ToolView()
}
.restorationBehavior(.disabled)
```

UIKit 开发者则可通过 `destructionConditions` API 实现相同效果。

### 动态启动控制
visionOS 26 允许开发者根据应用状态动态控制启动场景：
```swift
WindowGroup("Welcome", id: "welcome") {
    WelcomeView()
}
.defaultLaunchBehavior(isFirstLaunch ? .presented : .automatic)
```

## 空间容器增强功能

### 表面吸附技术
现在用户可以将窗口吸附到墙面或桌面等物理表面。开发者可以通过 `SurfaceSnappingInfo` API 获取吸附状态：
```swift
@Environment(\.surfaceSnappingInfo) private var snappingInfo

RealityView()
.onChange(of: snappingInfo) {
    if snappingInfo.isSnapped {
        // 处理吸附状态
    }
}
```

### 边缘裁剪支持
新增的裁剪边距功能允许内容超出场景边界显示：
```swift
.preferredWindowClippingMargins(.bottom, maxWaterfallHeight * pointsPerMeter)
```

## 沉浸式空间创新

### 重定位事件处理
当用户重新定位虚拟环境时，可以通过回调更新内容位置：
```swift
RealityView()
.onWorldRecenter { recomputePositions() }
```

### 远程沉浸空间
macOS 应用现在可以流式传输沉浸式内容到 Vision Pro：
```swift
RemoteImmersiveSpace(id: "preview") {
    CompositorLayer(configuration: config)
}
```

## 场景桥接技术
UIKit 应用现在可以无缝集成 SwiftUI 的空间体验：
```swift
class MyHostingSceneDelegate: NSObject, UIHostingSceneDelegate {
    static var rootScene: some Scene {
        WindowGroup(id: "volume") {
            ContentView()
        }
        .windowStyle(.volumetric)
    }
}
```

## 结语
visionOS 26 的场景 API 为开发者提供了前所未有的控制力和灵活性。无论是优化现有应用还是创造全新体验，这些工具都能帮助你打造更加自然、沉浸的虚拟现实应用。

立即开始探索这些新功能，为你的用户带来令人惊叹的空间体验吧！

## 相关视频
- [小组件的新功能](https://developer.apple.com/videos/play/wwdc2025/278)
- [搭配使用更出色：SwiftUI 和 RealityKit](https://developer.apple.com/videos/play/wwdc2025/274)
- [用于打造沉浸式 App 的 Metal 渲染的新功能](https://developer.apple.com/videos/play/wwdc2025/294)

## 文档
- [Adopting best practices for persistent UI](https://developer.apple.com/documentation/visionOS/adopting-best-practices-for-scene-restoration)
> 此文章由AI生成，可能存在错误，如有问题，请联系[djs66256@163.com](djs66256@163.com)