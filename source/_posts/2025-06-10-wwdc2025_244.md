---
title: 了解 App Intents
date: 2025-06-10 15:43:02
categories:
- wwdc2025
tags:
- wwdc2025
- ios
- ipados
- macos
- 机器学习与-ai
---
了解 app intents 框架及其在 apple 开发者平台中愈显关键的作用。我们将向你全面介绍意图、实体、查询等核心概念。你将了解如何综合运用这些概念，以便使你的 app 与 apple 设备 (从“聚焦”和“快捷指令”等软件功能到操作按钮等硬件功能) 实现整合。我们还将介绍如何将 app intents 作为你 app 的入口，以便将来实现与 apple 智能的整合。
<!--more-->

![视频封面](https://devimages-cdn.apple.com/wwdc-services/images/3055294D-836B-4513-B7B0-0BC5666246B0/9971/9971_wide_250x141_2x.jpg)
[视频地址](https://developer.apple.com/cn/videos/play/wwdc2025/244/)

# App Intents 框架：将应用功能扩展到整个 Apple 生态

## 引言
作为 Apple 开发者，您是否想让应用的功能在全系统范围内可用？App Intents 框架正是为此而生。它能帮助您的应用深度集成到 Apple 生态系统中，无论是聚焦搜索、快捷指令、控制中心还是硬件交互，都能为用户提供无缝体验。本文将带您全面了解 App Intents 的核心概念、技术实现和最佳实践。

## App Intents 的核心价值

App Intents 不只是个功能框架，更是让应用能力向外辐射的生态系统。通过它，您可以将应用的功能扩展到：
- 聚焦搜索：呈现定制化结果
- 操作按钮：提供情境感知体验
- 小组件：增加可配置交互
- 控制中心：添加快捷控件
- Apple Pencil Pro：设计专属动作

今年的新功能中，特别值得注意的是 Mac 版聚焦搜索现已支持直接调用应用动作。

## App Intents 基本概念

### Intent（意图）
Intent 是应用动作的定义，可以理解为应用的"动词"。它能接收参数并返回值，这些输入输出可以是：
- Swift 原生类型
- 自定义类型
- App Enum（固定值集合）
- App Entity（动态类型数据）

### App Shortcuts（应用快捷指令）
App Shortcuts 能将关键意图提升为系统级功能，在聚焦搜索、Siri、操作按钮等场景直接触达用户。它由意图和参数组成，只需几行代码即可实现。

## 如何创建您的第一个 App Intent

下面通过一个旅行地标应用的案例，演示如何创建基本的导航意图：

```swift
struct NavigateIntent: AppIntent {
    static let title: LocalizedStringResource = "前往地标列表"
    static let supportedModes: IntentModes = .foreground
    
    @MainActor
    func perform() async throws -> some IntentResult {
        Navigator.shared.navigate(to: .landmarks)
        return .result()
    }
}
```

这个基础意图包含三个关键部分：
1. `title`：定义意图的显示名称
2. `supportedModes`：指定运行模式（前台/后台）
3. `perform`：实现具体功能

## 进阶功能实现

### 支持多模块导航
我们可以扩展上面的基础意图，使其支持多个导航选项：

```swift
enum NavigationOption: String, AppEnum {
    case landmarks = "地标"
    case map = "地图"
    case collections = "收藏集"
    // 显示配置代码...
}

struct NavigateIntent: AppIntent {
    @Parameter(title: "目标模块") 
    var navigationOption: NavigationOption
    // 执行代码...
}
```

### 优化用户体验
通过添加参数摘要，可以进一步提升用户体验：

```swift
static var parameterSummary: some ParameterSummary {
    Summary("跳转到\(\.$navigationOption)模块")
}
```

特别提示：当意图包含完整参数摘要时，用户可以直接在 Mac 聚焦搜索中运行该动作。

## 处理动态数据（App Entity）

对于像地标这样的动态数据，我们需要使用 App Entity 进行建模：

```swift
struct LandmarkEntity: AppEntity {
    var id: Int { landmark.id }
    @ComputedProperty var name: String { landmark.name }
    // 查询协议实现...
}
```

今年的新特性包括：
- `@ComputedProperty`：动态获取属性值
- `Transferable`：支持跨应用数据分享
- `IndexedEntity`：与聚焦搜索深度集成

## 精准导航实现

使用 `TargetContentProvidingIntent` 协议可以实现精准跳转：

```swift
struct OpenLandmarkIntent: OpenIntent, TargetContentProvidingIntent {
    @Parameter var target: LandmarkEntity
}

// 在SwiftUI中绑定导航
.onAppIntentExecution(OpenLandmarkIntent.self) { intent in
    path.append(intent.target.landmark)
}
```

## App Intents 的架构原理

App Intents 采用编译时代码解析机制：
1. 构建时分析 Swift 源码生成意图描述
2. 描述数据打包进应用二进制
3. 安装后系统直接读取元数据
4. 无需运行应用即可理解功能

## 跨目标共享实现

要在不同目标间共享 App Intents，需要声明 `AppIntentsPackage`：

```swift
// 共享框架中
public struct TravelTrackingKitPackage: AppIntentsPackage {}

// 主应用中
struct TravelTrackingPackage: AppIntentsPackage {
    static var includedPackages: [any AppIntentsPackage.Type] {
        [TravelTrackingKitPackage.self]
    }
}
```

今年新增了对 Swift 包和静态库的完整支持。

## 实施路线建议

1. 从核心功能创建首个 App Shortcut
2. 逐步添加实体和高级查询
3. 利用新特性优化系统集成
4. 参考其他专题会议深化应用

## 相关视频

- [使用 App Intents 针对"快捷指令"和"聚焦"进行开发](https://developer.apple.com/videos/play/wwdc2025/260)
- [设计交互式摘要卡片](https://developer.apple.com/videos/play/wwdc2025/281)
- [利用 App Intents 为用户奉上 App 的核心功能](https://developer.apple.com/videos/play/wwdc2024/10210)
- [利用 App Intents 设计提升系统体验](https://developer.apple.com/videos/play/wwdc2024/10176)
- [带你的 App 登陆 Siri](https://developer.apple.com/videos/play/wwdc2024/10133)
- [App Intents 的新功能](https://developer.apple.com/videos/play/wwdc2024/10134)

## 文档

- [App intent domains](https://developer.apple.com/documentation/AppIntents/app-intent-domains)
- [App Intents](https://developer.apple.com/documentation/AppIntents)
- [App Shortcuts](https://developer.apple.com/documentation/AppIntents/app-shortcuts)
- [Creating your first app intent](https://developer.apple.com/documentation/AppIntents/Creating-your-first-app-intent)
- [Integrating actions with Siri and Apple Intelligence](https://developer.apple.com/documentation/AppIntents/Integrating-actions-with-siri-and-apple-intelligence)
- [Making actions and content discoverable and widely available](https://developer.apple.com/documentation/AppIntents/Making-actions-and-content-discoverable-and-widely-available)
> 此文章由AI生成，可能存在错误，如有问题，请联系[djs66256@163.com](djs66256@163.com)