---
title: 使用 App Intents 针对“快捷指令”和“聚焦”进行开发
date: 2025-06-10 21:46:48
categories:
- wwdc2025
tags:
- wwdc2025
- ios
- ipados
- macos
- 机器学习与-ai
---
了解如何构建 app intents，以使操作在 mac 上的“快捷指令”和“聚焦”中可用，并能够与这两个 app 中的新功能实现完美搭配。我们将介绍你的操作如何与“快捷指令”app 中提供的新 apple 智能操作相结合并产生令人惊叹的效果。我们将深入探讨全新“使用模型”操作的工作方式，以及它如何与 app 的实体进行交互。我们还将讨论如何使用 app intents api 让你的操作在“聚焦”中可用。
<!--more-->

![视频封面](https://devimages-cdn.apple.com/wwdc-services/images/3055294D-836B-4513-B7B0-0BC5666246B0/9969/9969_wide_250x141_2x.jpg)
[视频地址](https://developer.apple.com/cn/videos/play/wwdc2025/260/)
> 此文章由AI生成，可能存在错误，如有问题，请联系[djs66256@163.com](djs66256@163.com)

# 使用 App Intents 为快捷指令和聚焦搜索赋能开发

在 WWDC 2023 的技术演讲中，苹果详细介绍了如何通过 App Intents 框架将应用功能深度整合到快捷指令和聚焦搜索中。以下是本次演讲的核心内容和技术要点。

## App Intents 框架概述

App Intents 框架为开发者提供了强大的工具，使其应用功能能够获得更高的平台可见性。通过该框架，用户可以在快捷指令和聚焦搜索等多种场景中直接使用应用的核心功能，极大地提升了应用的可用性和自动化潜力。

## 快捷指令中的智能操作

今年快捷指令 App 引入了多项革命性的智能操作，其中"使用模型"功能尤为突出。这项操作让用户能够在自己的快捷指令中调用 Apple 智能模型，将原本复杂的任务变得简单高效。

### 模型选项与使用场景

开发者可以选择三种不同的模型处理方式：
1. 服务器端模型：处理复杂请求，同时保护用户隐私
2. 设备端模型：处理无需联网的简单请求
3. ChatGPT：利用其广泛知识和技能

典型的使用场景包括：
- 筛选特定行程相关的日历事件
- 生成网页内容摘要
- 查询最新趋势信息

### 模型输出处理技术

模型输出的处理是确保应用与模型无缝衔接的关键，开发者需要注意以下技术要点：

#### 文本处理
AttributedString 类型是处理富文本内容的最佳选择，它能够完美保留模型输出的各种格式样式，包括粗体、斜体、列表和表格等。

#### 字典输出
字典输出适用于结构化数据的传递，能将非结构化数据转换为应用可直接使用的格式。

#### 应用实体处理
当应用实体传入模型时，系统会将其转换为 JSON 格式传递。开发者需要确保：
- 关键信息在实体定义中公开
- 所有属性都会转为字符串包含在 JSON 中
- 包含类型名称和显示信息

## 聚焦搜索集成优化

今年，Mac 上的聚焦搜索获得了重大升级，用户可以直接在其中运行应用提供的各种操作。

### 聚焦搜索显示条件
要使意图显示在聚焦搜索中，开发者需要：
1. 确保参数摘要包含所有必要无默认值参数
2. 意图未被设置为隐藏状态
3. 提供有效的 perform 方法

### 用户体验优化要点
1. **建议提供**：通过 SuggestedEntities 或 allEntities 提供参数建议
2. **搜索体验**：实现 EntityStringQuery 或 IndexedEntity 支持深度搜索
3. **运行方式**：合理区分后台意图和前台意图

## Mac 自动化新功能

Mac 今年新增了个人自动化功能，包括针对文件夹和外接硬盘的自动化触发机制。所有在 macOS 可用的意图都能用于这些自动化场景，为用户提供更丰富的自动化可能。

## 开发建议

根据演讲内容，开发者应采取以下关键步骤：
1. 将应用内容作为适合快捷指令的实体公开
2. 使用 AttributedString 支持富文本输入
3. 优化 Mac 聚焦搜索中的意图呈现效果

## 相关资源

开发者可参考以下资源深入了解相关内容：

### 相关视频
[为聚焦设计快捷指令](https://developer.apple.com/videos/play/wwdc2023/10193)
[使用 App 快捷指令突出你的 App](https://developer.apple.com/videos/play/wwdc2023/10102)

### 文档资源
[App Intents](https://developer.apple.com/documentation/AppIntents)
[App Shortcuts](https://developer.apple.com/documentation/AppIntents/app-shortcuts)
[Donating Shortcuts](https://developer.apple.com/documentation/SiriKit/donating-shortcuts)
[Human Interface Guidelines: App Shortcuts](https://developer.apple.com/design/human-interface-guidelines/app-shortcuts)
