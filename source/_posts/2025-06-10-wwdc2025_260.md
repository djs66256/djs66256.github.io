---
title: 使用 App Intents 针对“快捷指令”和“聚焦”进行开发
date: 2025-06-10 15:43:06
categories:
- wwdc2025
tags:
- wwdc2025
- ios
- ipados
- macos
- 机器学习与-ai
---
了解如何构建 app intents，以使操作在 mac 上的“快捷指令”和“聚焦”中可用，并能够与这两个 app 中的新功能实现完美搭配。我们将介绍你的操作如何与“快捷指令”app 中提供的新 apple 智能操作相结合并产生令人惊叹的效果。我们将深入探讨全新“使用模型”操作的工作方式，以及它如何与 app 的实体进行交互。我们还将讨论如何使用 app intents api 让你的操作在“聚焦”中可用。
<!--more-->

![视频封面](https://devimages-cdn.apple.com/wwdc-services/images/3055294D-836B-4513-B7B0-0BC5666246B0/9969/9969_wide_250x141_2x.jpg)
[视频地址](https://developer.apple.com/cn/videos/play/wwdc2025/260/)

# 通过 App Intents 扩展应用能力：深度集成"快捷指令"与"聚焦"

## 引言

作为开发者，我们一直在寻找提升应用交互性和实用性的方法。App Intents 框架提供了一个绝佳机会，让您的应用功能能够无缝集成到 macOS 的"快捷指令"和"聚焦"中。这不仅增加了应用的曝光度，也为用户提供了更高效的使用体验。

## 全新"使用模型"操作解析

今年"快捷指令"引入了多项革命性的智能操作，其中最引人注目的是"使用模型"操作。这个功能允许用户：

- 选择设备端模型进行离线处理
- 使用 Private Cloud Compute 处理复杂请求
- 接入 ChatGPT 获取广泛知识

**实际应用场景示例**：
```swift
// 示例代码：模型筛选相关笔记
let relevantNotes = notes.filter { note in
    let answer = model.query("此笔记是否与'快捷指令'App功能开发相关?")
    return answer == "是"
}
```

### 模型输出的三种衔接方式

1. **富文本支持**：使用 AttributedString 类型保留文本格式
2. **结构化数据**：字典格式处理多段数据
3. **应用实体**：通过 JSON 表示传递实体信息

## "聚焦"搜索的深度集成

### 优化"聚焦"显示的三个关键点

1. 确保参数摘要完整
2. 检查 discoverability 设置
3. 确认意图具有 perform 方法

**性能优化建议**：
- 对频繁访问的数据实现 SuggestedEntities
- 小型数据集使用 allEntities
- 通过 NSUserActivity 标记当前内容

## Mac 自动化新机遇

Mac 版自动化现在支持：
- 文件夹/外接硬盘触发
- 传统时间/蓝牙触发

**示例应用**：
```swift
// 文件夹自动化示例
folderObserver.startMonitoring { newFiles in
    if newFiles.contains(where: { $0.isInvoice }) {
        runInvoiceProcessingShortcut()
    }
}
```

## 实现建议与最佳实践

1. **实体公开**：
   - 提供高效的查找操作
   - 暴露关键推理属性

2. **文本处理**：
   - 全面支持 AttributedString
   - 保留模型输出的富文本格式

3. **聚焦优化**：
   - 提供智能建议
   - 支持深度搜索

## 结语

通过 App Intents 框架，您不仅能让应用功能在更多场景中可用，还能为用户创造更智能、更高效的体验。现在是时候重新审视您的应用架构，思考如何更好地与系统集成。

## 相关视频

- [为聚焦设计快捷指令](https://developer.apple.com/videos/play/wwdc2023/10193)
- [使用 App 快捷指令突出你的 App](https://developer.apple.com/videos/play/wwdc2023/10102)

## 文档

- [App Intents 官方文档](https://developer.apple.com/documentation/AppIntents)
- [App Shortcuts 开发指南](https://developer.apple.com/documentation/AppIntents/app-shortcuts)
- [Shortcuts 捐赠指南](https://developer.apple.com/documentation/SiriKit/donating-shortcuts)
- [人机界面指南：App Shortcuts](https://developer.apple.com/design/human-interface-guidelines/app-shortcuts)
> 此文章由AI生成，可能存在错误，如有问题，请联系[djs66256@163.com](djs66256@163.com)