---
title: 提升 App 的音频录制功能
date: 2025-06-10 15:57:13
categories:
- wwdc2025
tags:
- wwdc2025
- ios
- ipados
- macos
- 音频和视频
---
了解如何提升 app 的音频录制功能。探索如何通过 ios 和 ipados 26 上的输入选择器交互来灵活地选择音频设备。了解有哪些 api 可帮助你通过 airpods 进行高质量录音。我们还将介绍空间音频录制和编辑功能，这些功能可让你隔离语音和环境背景音，所有这些功能均可使用 audiotoolbox、avfoundation 和 cinematic 框架实现。
<!--more-->

![视频封面](https://devimages-cdn.apple.com/wwdc-services/images/3055294D-836B-4513-B7B0-0BC5666246B0/10050/10050_wide_250x141_2x.jpg)
[视频地址](https://developer.apple.com/cn/videos/play/wwdc2025/251/)

# iOS 26 音频录制新功能全解析：从设备选择到空间音频

## 引言
在 iOS 和 iPadOS 26 中，Apple 为开发者带来了一系列强大的音频录制新功能。无论您是想在应用中实现专业的设备切换功能，还是希望集成 AirPods 的高质量录音，甚至是探索空间音频的创作可能，这些新 API 都能满足您的需求。本文将详细介绍这些功能及其实现方式。

## 输入设备选择器：应用内无缝切换

### 新特性概述
iOS 26 引入了全新的输入设备选择 API，允许用户直接在应用内切换音频输入源，无需跳转到系统设置。这对于内容创作类应用特别有价值。

### 实现代码
```swift
import AVKit

class AppViewController {
    // 配置音频会话
    
    // AVInputPickerInteraction 是展示输入选择器的 NSObject 子类
    let inputPickerInteraction = AVInputPickerInteraction()   
    inputPickerInteraction.delegate = self

    // 将选择器关联到 UI 元素（如按钮）
    @IBOutlet weak var selectMicButton: UIButton!
    self.selectMicButton.addInteraction(self.inputPickerInteraction)

    // 按钮回调：展示输入选择器
    @IBAction func handleSelectMicButton(_ sender: UIButton) {
	    inputPickerInteraction.present()
    }
}
```

## AirPods 高质量录音模式

### 开启方式
iOS 26 为 AirPods 提供了专为内容创作优化的高质量录音模式，其效果可媲美专业领夹麦克风。

### 配置方法
```swift
// AVAudioSession 启用方式 - 会话分类选项
AVAudioSessionCategoryOptions.bluetoothHighQualityRecording

// AVCaptureSession 启用方式 - 捕获会话属性
session.configuresApplicationAudioSessionForBluetoothHighQualityRecording = true  
```

## 空间音频录制与编辑

### 技术原理
空间音频采用第一阶 Ambisonics (FOA) 格式，包含：
- 1 个全向分量
- 3 个正交分量 (X/Y/Z 轴方向)

### 音频混音功能
iOS 26 新增了音频混音 API，可以调节人声与环境音的平衡：

```swift
import Cinematic

// 混音参数（建议通过 UI 元素调节）
var intensity: Float32 = 0.5 // 0.0 到 1.0 之间
var style = CNSpatialAudioRenderingStyle.cinematic

// 异步初始化 CNAssetAudioInfo
let audioInfo = try await CNAssetSpatialAudioInfo(asset: myAVAsset)
    
// 生成带效果的 AVAudioMix
let newAudioMix: AVAudioMix = audioInfo.audioMix(effectIntensity: intensity,
                                                 renderingStyle: style)

// 应用于 AVPlayerItem
myAVPlayerItem.audioMix = newAudioMix
```

## 升级路线图
建议开发者按照以下步骤升级应用：
1. 添加 AVInputPickerInteraction 实现原生设备切换
2. 启用 AirPods 高质量录音选项
3. 结合 MovieFileOutput 和 AudioDataOutput 实现灵活处理
4. 用 AVAssetWriter 集成空间音频采集
5. 在回放时应用音频混音 API

## 相关视频
- [利用拍摄控件提升你的相机体验](https://developer.apple.com/videos/play/wwdc2025/253)
- [在你的 App 中录制电影效果视频](https://developer.apple.com/videos/play/wwdc2025/319)

## 文档
- [AVFoundation](https://developer.apple.com/documentation/AVFoundation)
- [Cinematic](https://developer.apple.com/documentation/Cinematic)
- [TN3177: Understanding alternate audio track groups in movie files](https://developer.apple.com/documentation/Technotes/tn3177-understanding-alternate-audio-track-groups-in-movie-files)
> 此文章由AI生成，可能存在错误，如有问题，请联系[djs66256@163.com](djs66256@163.com)