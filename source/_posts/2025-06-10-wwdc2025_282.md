---
title: 让你的 UIKit App 更加灵活
date: 2025-06-10 15:38:56
categories:
- wwdc2025
tags:
- wwdc2025
- ios
- ipados
- macos
- tvos
- visionos
- swiftui-和-ui-框架
---
探究如何使用场景和容器视图控制器让你的 uikit app 在 iphone、ipad、mac 和 apple vision pro 上变得更加灵活。了解如何从以 app 为中心的生命周期过渡到基于场景的生命周期 (包括优化的窗口大小调整和改进的多任务处理)，以便解锁 app 的全部潜能。探索 uisplitviewcontroller 的增强功能，例如以交互方式调整列大小以及为检查器列提供一流支持；并通过采用新的布局 api 来增强视图和控制器的自适应性。
<!--more-->

![视频封面](https://devimages-cdn.apple.com/wwdc-services/images/3055294D-836B-4513-B7B0-0BC5666246B0/10000/10000_wide_250x141_2x.jpg)
[视频地址](https://developer.apple.com/cn/videos/play/wwdc2025/282/)

# 构建适应多平台的 UIKit 应用：场景、容器与自适应 UI

## 引言
在今天的多设备时代，一个优秀的应用需要在 iPhone、iPad、Mac 和 Apple Vision Pro 等不同平台上提供一致的体验。本文将深入探讨如何利用 UIKit 的场景系统、容器视图控制器和自适应 UI 技术，让你的应用在各种尺寸和环境下都能展现最佳状态。

## 场景：灵活应用的基础
场景是 UIKit 应用 UI 的独立实例，每个场景拥有：
- 独立的视图控制器和视图层级
- 专属的状态保存与恢复机制
- 精确的显示上下文信息（包括屏幕详情和窗口几何数据）

### 场景配置与生命周期
```swift
@main
class AppDelegate: UIResponder, UIApplicationDelegate {
    func application(_ application: UIApplication,
                    configurationForConnecting sceneSession: UISceneSession,
                    options: UIScene.ConnectionOptions) -> UISceneConfiguration {
        
        if sceneSession.role == .windowExternalDisplayNonInteractive {
            return UISceneConfiguration(name: "Timer Scene", 
                                      sessionRole: sceneSession.role)
        } else {
            return UISceneConfiguration(name: "Main Scene",
                                      sessionRole: sceneSession.role)
        }
    }
}
```

iOS 26 起，采用 UIScene 生命周期将成为强制要求，这是迈向灵活应用的第一步。

## 容器视图控制器
UIKit 提供了强大的容器视图控制器来管理复杂布局：

### 增强的分栏视图控制器
UISplitViewController 的最新改进包括：
- 交互式列宽调整
- 检查器列的一流支持
- 灵活的宽度控制

```swift
splitViewController.minimumPrimaryColumnWidth = 200.0
splitViewController.maximumPrimaryColumnWidth = 400.0
splitViewController.preferredSupplementaryColumnWidth = 500.0
```

### 标签栏控制器的多平台适应
UITabBarController 在不同设备上呈现不同形态：
- iPhone：底部标签栏
- Mac：工具栏或侧边栏
- Apple Vision Pro：场景边缘装饰栏
- iPad：顶部标签栏可自适应为侧边栏

## 构建真正的自适应 UI
要实现完全自适应的界面，需要关注以下关键点：

### 安全区域与布局边距
```swift
let contentGuide = containerView.layoutMarginsGuide
NSLayoutConstraint.activate([
    contentView.anchors.constraint(equalTo: contentGuide)
])
```

### 窗口尺寸控制
```swift
func scene(_ scene: UIScene, willConnectTo session: UISceneSession, options: UIScene.ConnectionOptions) {
    let windowScene = scene as! UIWindowScene
    windowScene.sizeRestrictions?.minimumSize.width = 500.0
}
```

### 方向锁定处理
```swift
override var prefersInterfaceOrientationLocked: Bool { return isDriving }
var isDriving = false {
    didSet { setNeedsUpdateOfPrefersInterfaceOrientationLocked() }
}
```

## 未来兼容性建议
随着 iOS 26 的推出，系统将不再对新屏幕尺寸进行自动缩放调整。开发者需要：
- 移除 UIRequiresFullscreen 这种兼容模式
- 确保应用在各种尺寸下都能正确显示
- 采用最新的自适应布局技术

## 结论
构建真正灵活的多平台应用需要：
1. 采用场景生命周期作为基础架构
2. 合理使用容器视图控制器管理复杂布局
3. 充分利用安全区域和自适应布局 API
4. 关注未来兼容性要求

通过这些技术组合，你的应用将能够在 Apple 生态系统的任何设备上提供卓越的用户体验。

## 相关视频
- [UIKit 的新功能](https://developer.apple.com/videos/play/wwdc2025/243)
- [提升 iPadOS 中的标签页和边栏使用体验](https://developer.apple.com/videos/play/wwdc2024/10147)

## 文档
- [TN3187: 迁移至 UIKit 基于场景的生命周期](https://developer.apple.com/documentation/Technotes/tn3187-Migrating-to-the-UIKit-scene-based-life-cycle)
- [UIKit 更新](https://developer.apple.com/documentation/Updates/UIKit)
> 此文章由AI生成，可能存在错误，如有问题，请联系[djs66256@163.com](djs66256@163.com)