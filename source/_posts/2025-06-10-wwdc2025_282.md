---
title: 让你的 UIKit App 更加灵活
date: 2025-06-10 21:46:48
categories:
- wwdc2025
tags:
- wwdc2025
- ios
- ipados
- macos
- tvos
- visionos
- swiftui-和-ui-框架
---
探究如何使用场景和容器视图控制器让你的 uikit app 在 iphone、ipad、mac 和 apple vision pro 上变得更加灵活。了解如何从以 app 为中心的生命周期过渡到基于场景的生命周期 (包括优化的窗口大小调整和改进的多任务处理)，以便解锁 app 的全部潜能。探索 uisplitviewcontroller 的增强功能，例如以交互方式调整列大小以及为检查器列提供一流支持；并通过采用新的布局 api 来增强视图和控制器的自适应性。
<!--more-->

![视频封面](https://devimages-cdn.apple.com/wwdc-services/images/3055294D-836B-4513-B7B0-0BC5666246B0/10000/10000_wide_250x141_2x.jpg)
[视频地址](https://developer.apple.com/cn/videos/play/wwdc2025/282/)
> 此文章由AI生成，可能存在错误，如有问题，请联系[djs66256@163.com](djs66256@163.com)

# 让你的UIKit应用更具灵活性：全面适配多平台的实践指南

在如今多样化的苹果设备生态系统中，如何确保UIKit应用能够在iPhone、iPad、Mac和Apple Vision Pro等不同平台上提供一致而优秀的用户体验？本文将从场景基础、容器视图控制器到自适应UI构建，全面解析UIKit应用灵活性提升的最佳实践。

## 场景：灵活应用的基石

场景作为应用UI的独立实例，为灵活应用提供了坚实基础。每个场景包含应用视图控制器和视图，具有独立生命周期和状态恢复能力。在iOS 26中，开发者现在可以在单个应用中混合使用SwiftUI和UIKit场景类型。

场景实现的关键步骤包括：

1. 在应用委托中处理场景配置，区分不同角色（如主场景和AirPlay到Apple TV的外部显示器场景）
2. 通过UISceneDelegate管理单个场景生命周期，包括窗口创建和根视图控制器设置
3. 实现状态恢复机制，使用UI状态活动保存和恢复场景的交互状态

值得注意的是，采用UIScene生命周期即将成为强制要求。开发者应参考技术说明"迁移到基于场景的UIKit生命周期"（TN3187）完成这一关键过渡。

## 容器视图控制器：灵活布局的核心

UIKit提供的容器视图控制器是实现灵活布局的核心工具。

### UISplitViewController的新特性

UISplitViewController管理多列内容显示，并获得了多项增强：

1. **交互式列调整**：用户现在可通过拖动分隔符调整列宽，指针形状会相应变化指示调整方向
2. **列宽自定义**：开发者可设置minimumWidth、maximumWidth和preferredWidth属性优化列显示
3. **分割视图控制器布局环境**：新特征帮助UI根据展开/折叠状态自适应调整
4. **检查器列支持**：原生支持在尾随边缘显示元数据等附加信息，自动适应展开/折叠状态

```swift
// 示例：设置分割视图控制器的列宽偏好
splitViewController.setMinimumWidth(200, for: .primary)
splitViewController.setMaximumWidth(400, for: .primary)
splitViewController.setPreferredWidth(300, for: .primary)
```

### UITabBarController的多平台适配

UITabBarController在不同平台呈现差异化：

- iPhone：底部标签栏
- Mac：工具栏或边栏
- Apple Vision Pro：场景前缘装饰
- iPad：顶部与导航控件结合或作为边栏

标签组管理是重要功能，开发者可通过UITabBarControllerDelegate自定义导航堆栈的视图控制器推送逻辑。

```swift
// 示例：自定义标签组视图控制器显示
func tabBarController(_ tabBarController: UITabBarController, 
                    displayedViewControllersFor tab: UITabBarItem) -> [UIViewController] {
    guard tab == libraryTab else { return [] }
    return [libraryViewController]
}
```

## 构建真正自适应的UI

### 安全区域与布局指南

确保内容位于安全区域内是自适应UI的关键。开发者应：

1. 使用layoutMarginsGuide为标准边距定位内容
2. 在iPadOS 26中，注意窗口控制对布局的影响
3. 使用水平角适应的布局边距指南处理窗口控制周边的布局

```swift
// 示例：安全区域布局实现
let margins = view.layoutMarginsGuide
contentView.leadingAnchor.constraint(equalTo: margins.leadingAnchor).isActive = true
contentView.trailingAnchor.constraint(equalTo: margins.trailingAnchor).isActive = true
```

### 窗口控制与方向管理

iPadOS 26引入了类似macOS的窗口控制。开发者应：

1. 通过UIWindowSceneDelegate实现preferredWindowingControlStyle指定偏好样式
2. 使用考虑窗口控制的布局指南防止UI遮挡
3. 谨慎使用界面方向锁定，仅在必要时通过prefersInterfaceOrientationLocked实现

### 性能优化与未来兼容

对于资源密集型UI（如游戏），应：

1. 通过isInteractivelyResizing仅在交互完成后更新资源
2. 移除已弃用的UIRequiresFullscreen键
3. 注意iOS 26后系统将不再为新屏幕尺寸自动缩放应用UI

## 总结与下一步

构建灵活UIKit应用的三部曲：

1. **采用场景生命周期**：为多平台适配奠定基础
2. **善用容器视图控制器**：UISplitViewController和UITabBarController是强大工具
3. **实现自适应UI**：通过安全区域、布局指南等API确保界面弹性

开发者应观看相关视频"UIKit的新功能"和"提升iPadOS中的标签页和边栏使用体验"，并参考技术文档完成迁移。通过这些实践，应用将能在苹果全平台生态中提供卓越的用户体验。

# 相关视频

[UIKit的新功能](https://developer.apple.com/videos/play/wwdc2025/243)
[提升iPadOS中的标签页和边栏使用体验](https://developer.apple.com/videos/play/wwdc2024/10147)
# 文档

[TN3187:迁移到基于场景的UIKit生命周期](https://developer.apple.com/documentation/Technotes/tn3187-Migrating-to-the-UIKit-scene-based-life-cycle)
[UIKit更新](https://developer.apple.com/documentation/Updates/UIKit)
