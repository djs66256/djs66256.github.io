---
title: 使用 Vision 框架读取文档
date: 2025-06-10 15:42:38
categories:
- wwdc2025
tags:
- wwdc2025
- ios
- ipados
- macos
- visionos
- 机器学习与-ai
---
了解 vision 框架的最新进展。我们将介绍 recognizedocumentsrequest，并介绍如何使用该工具读取文本行并将其分组为段落、读取表格等。此外，我们将深入探讨相机镜头污渍检测，以及如何在照片图库或你自己的相机拍摄管道中识别可能有污渍的图像。
<!--more-->

![视频封面](https://devimages-cdn.apple.com/wwdc-services/images/3055294D-836B-4513-B7B0-0BC5666246B0/9973/9973_wide_250x141_2x.jpg)
[视频地址](https://developer.apple.com/cn/videos/play/wwdc2025/272/)

# Vision 框架新功能解析：文档读取与镜头污渍检测

## 引言
Apple 的 Vision 框架一直是开发者实现计算机视觉功能的利器。在最新版本中，Vision 框架新增了文档结构识别和相机镜头污渍检测两大功能，为应用开发带来了更多可能性。本文将详细介绍这些新功能的技术实现和使用方法。

## 文档读取功能详解

### 结构化文档解析
传统的 `RecognizeTextRequest` 只能提取文本行信息，而全新的 `RecognizeDocumentsRequest` 则能识别文档的结构化元素：
- 自动分组文本行为自然阅读段落
- 识别表格及其行列结构
- 检测列表及其层次关系
- 提取二维码等机器可读编码
- 识别电子邮件、电话号码等关键信息

### 代码实现示例
以下是使用新 API 处理文档表格的 Swift 代码：

```swift
// 从图像中提取第一个表格
func extractTable(from image: Data) async throws -> DocumentObservation.Container.Table {
    let request = RecognizeDocumentsRequest()
    let observations = try await request.perform(on: image)
    guard let document = observations.first?.document else { throw AppError.noDocument }
    guard let table = document.tables.first else { throw AppError.noTable }
    return table
}
```

表格内容可通过多种方式访问：
- `transcript`：获取完整文本字符串
- `lines`：按行分组的文本数组
- `paragraphs`：自然段落分组
- `detectedData`：识别出的结构化信息

## 相机镜头污渍检测

### 技术特点
新的 `DetectLensSmudgeRequest` 能检测镜头污渍问题：
- 返回 0-1 的置信度分数
- 建议设置 0.9 左右的阈值
- 需注意运动模糊等特殊情况

### 使用建议
为提高检测准确率，可以结合其他 Vision API：
1. 人像照片：使用 `DetectFaceCaptureQualityRequest`
2. 普通照片：使用 `CalculateImageAestheticScoresRequest`

## 手部姿态检测更新

2020 年推出的手部姿态检测模型已升级：
- 更小的模型体积
- 更低的延迟
- 更高的精度
- 注意：关节定位方式有变化，建议重新训练分类器

## 结论

Vision 框架的新功能为开发者带来了：
1. 更强大的文档解析能力
2. 实用的镜头污渍检测
3. 性能提升的手部姿态检测

这些改进将使您的应用获得更精准的视觉处理能力。建议下载官方示例应用并观看相关视频以深入了解。

## 相关视频
- [探索 Apple 平台上的机器学习和 AI 框架](https://developer.apple.com/videos/play/wwdc2025/360)
- [探索 Vision 框架中的 Swift 增强功能](https://developer.apple.com/videos/play/wwdc2024/10163)
- [在 Vision 中探索 3D 人体位姿和人像分隔](https://developer.apple.com/videos/play/wwdc2023/111241)
- [在 Vision 中检测动物体态](https://developer.apple.com/videos/play/wwdc2023/10045)

## 文档资源
- [Classifying Images with Vision and Core ML](https://developer.apple.com/documentation/coreml/model_integration_samples/classifying_images_with_vision_and_core_ml)
- [Vision](https://developer.apple.com/documentation/Vision)
> 此文章由AI生成，可能存在错误，如有问题，请联系[djs66256@163.com](djs66256@163.com)