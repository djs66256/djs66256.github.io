---
title: 了解 SwiftUI 空间布局
date: 2025-06-10 21:46:48
categories:
- wwdc2025
tags:
- wwdc2025
- visionos
- 设计
---
探索使用 swiftui 开发空间体验的新工具。了解 visionos 上 3d swiftui 视图的基本知识，借助深度对齐功能来自定现有布局，并使用修饰符在空间中旋转和放置视图。探索如何使用空间容器在同一 3d 空间中对齐视图，打造更沉浸、更引人入胜的 app。
<!--more-->

![视频封面](https://devimages-cdn.apple.com/wwdc-services/images/3055294D-836B-4513-B7B0-0BC5666246B0/9989/9989_wide_250x141_2x.jpg)
[视频地址](https://developer.apple.com/cn/videos/play/wwdc2025/273/)
> 此文章由AI生成，可能存在错误，如有问题，请联系[djs66256@163.com](djs66256@163.com)

# 探索 SwiftUI 空间布局：构建沉浸式3D体验的新工具

在visionOS平台上，SwiftUI为开发者提供了一套全新的3D布局工具，让构建空间体验变得更加简单高效。本文将详细介绍这些新工具的功能和应用场景。

## 3D视图基础

visionOS平台上的SwiftUI视图具备真正的三维特性。布局系统不仅计算视图的宽度、高度和X/Y位置，还会计算深度维度(Z轴)。视图可分为两类：

- 深度为零的平面视图：如Image、Color和Text等传统2D元素
- 具有实际深度的3D视图：如Model3D、RealityView和GeometryReader3D等

开发者可以使用`scaledToFit3D`修饰符保持模型比例同时适应可用空间。值得注意的是，窗口内容和体积在深度提议上存在差异：

- 窗口内容接收固定的根深度提议，超出深度的内容可能被裁剪
- 体积提议则允许宽度、高度和深度调整

## 深度对齐定制

visionOS 26引入了自定义深度对齐功能。通过定义符合`DepthAlignmentID`协议的新结构体，开发者可以创建个性化的对齐方式。例如：

```swift
struct DepthPodiumAlignment: DepthAlignmentID {
    static func defaultValue(in dimensions: ViewDimensions) -> Double {
        dimensions[.bottom]
    }
}
```

这种机制让开发者能够灵活控制视图在深度维度上的排列方式，比如让特定元素(如"最喜欢的机器人")更加突出。

## 旋转布局技术

SwiftUI提供了两种不同的旋转机制：

1. `rotation3DEffect`修饰符：仅影响视觉呈现，不改变布局框架
2. `rotation3DLayout`修饰符：真正修改视图在3D空间中的布局框架

开发者可以利用这些工具构建复杂的3D布局，如机器人旋转木马效果。实现步骤包括：

1. 使用`RadialLayout`圆型排列元素
2. 应用`rotation3DLayout`使元素水平展示

## 空间容器工具

SwiftUI引入了两类新型3D布局容器：

1. `SpatialContainer`：允许多个视图共享相同的3D空间
2. `spatialOverlay`：在同一个3D空间上叠加单个视图

这些工具特别适合创建沉浸式效果，如实现选中机器人的视觉反馈环，确保其与机器人底部完美对齐。

## 调试与可视化

为帮助开发者理解3D布局，文中介绍了`debugBorder3D`修饰符的实现方法，该工具为视图添加可视边框，清晰展示其3D框架边界。

## 混合开发策略

虽然SwiftUI在3D布局方面能力强大，但某些复杂场景(如物理模拟)仍需结合RealityKit使用。Apple鼓励开发者在同一应用中灵活搭配这两个框架，充分发挥各自优势。

## 相关资源

开发者可通过以下资源进一步学习：

### 相关视频
[搭配使用更出色：SwiftUI 和 RealityKit](https://developer.apple.com/videos/play/wwdc2025/274)  
[使用 SwiftUI 构建自定布局](https://developer.apple.com/videos/play/wwdc2022/10056)  
[利用 SwiftUI 构建自定视图](https://developer.apple.com/videos/play/wwdc2019/237)  

### 文档
[Human Interface Guidelines: Designing for visionOS](https://developer.apple.com/design/human-interface-guidelines/designing-for-visionos)  

SwiftUI的空间布局工具为visionOS应用开发开辟了新的可能性，开发者现在可以用熟悉的声明式语法创建丰富的3D体验。随着这些技术的成熟，期待看到更多创新应用的诞生。
