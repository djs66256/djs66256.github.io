---
title: 了解 Apple Projected Media Profile
date: 2025-06-10 15:46:30
categories:
- wwdc2025
tags:
- wwdc2025
- visionos
- 空间计算
---
深入了解 apple projected media profile (apmp)，并探索 apmp 如何通过视频扩展使用信号技术在 quicktime 和 mp4 文件中实现 180º/360º 和宽视角投影。我们将针对如何使用 os 提供的框架和工具对包含 apmp 的媒体进行转换、读/写、编辑和编码提供相关指导。我们还将介绍 apple positional 音频编解码器 (apac) 的功能，这些功能可用于创建和交付空间音频内容，从而打造出极具沉浸感的体验。
<!--more-->

![视频封面](https://devimages-cdn.apple.com/wwdc-services/images/3055294D-836B-4513-B7B0-0BC5666246B0/10067/10067_wide_250x141_2x.jpg)
[视频地址](https://developer.apple.com/cn/videos/play/wwdc2025/297/)

# 全面解析 Apple 投影媒体配置文件（APMP）技术

## 引言

随着沉浸式媒体技术的快速发展，Apple 推出的投影媒体配置文件（APMP）为开发者提供了处理 180º/360º 视频及宽视角投影的全新解决方案。本文将深入探讨 APMP 的核心技术原理、工作流程以及配套的 Apple 方位音频编解码器（APAC），帮助开发者充分利用苹果生态系统的强大能力。

## APMP 技术基础

### 投影类型解析

APMP 支持多种非矩形视频投影类型：
- **矩形投影**：传统 2D/3D 视频和空间视频使用的标准投影
- **半等距柱面投影**：专为 180 度视频设计
- **等距柱面投影**：360 度全景视频的标准格式
- **参数化沉浸投影**：针对广角/鱼眼镜头优化，包含镜头畸变参数

等距柱面投影（Equirectangular Projection）通过将球面坐标转换为经纬度角度，均匀映射到矩形视频帧。水平轴代表经度（-180 至 +180 度），垂直轴代表纬度（-90 至 +90 度）。

### 技术实现细节

APMP 通过 QuickTime/MP4 文件结构实现信号传递，利用：
- **Video Extended Usage（vexu）扩展盒**：包含投影类型信息
- **镜头参数集合**：描述广角镜头的特性
- **视场包装信息**：处理立体视频内容

## 开发工作流详解

### 内容采集与处理

支持 APMP 的主流设备包括：
- 佳能 EOS VR 系统（立体 180 视频）
- GoPro MAX/Insta360 X5（360 视频）
- 新款运动相机（广角视频）

推荐工作流：
1. 使用 HEVC/RAW/ProRes 编解码器采集原始素材
2. 以 ProRes 格式进行编辑处理
3. 最终通过 MV-HEVC 编解码器发布成品

### 格式转换工具

对于不支持 APMP 的相机素材，开发者可以使用：
- `avconvert` 命令行工具转换球形元数据
- ImmersiveMediaSupport 框架的 `ParametricImmersiveAssetInfo` 自动生成视频格式描述

```swift
// 示例：检查投影类型
let playbackAssistant = AVAssetPlaybackAssistant(asset: asset)
let projectionType = playbackAssistant.projectionType
```

## 视频处理技术栈

### 核心框架支持

苹果生态系统提供了全面的 APMP 支持：
- **CoreMedia**：底层媒体处理
- **AVFoundation**：高级媒体操作接口
- **Video Toolbox**：硬件加速编解码

### 立体视频编辑

处理立体视频时的关键步骤：
1. 使用 `AVVideoComposition` 创建视频合成
2. 通过 `CMTaggedDynamicBuffer` 处理左右眼缓冲器
3. 提交标记缓冲器时指定正确的 buffer 描述

## 发布规范与优化

### 视频编码建议

针对 visionOS 的优化参数：
- 编码格式：HEVC Main/Main 10
- 分辨率：
  - 单视场：7680x3840（10bit）
  - 立体：4320x4320/每眼
- 帧率：推荐 30fps（8K 单视场或 4K 立体）
- 峰值码率：不超过 150Mbps

### 质量评估工具

利用高级视频质量工具（AVQT）进行沉浸格式评估，确保最终输出质量符合标准。

## Apple 方位音频编解码器（APAC）

APAC 为沉浸式体验提供关键音频支持：
- 支持 1-3 阶 Ambisonic 编码（4-16 通道）
- 不依赖特定扬声器布局
- 推荐码率：
  - 1 阶：384kbps
  - 3 阶：768kbps

通过 AVAssetWriter 可直接输出 APAC 编码音频，与 APMP 视频完美同步。

## 结论

APMP 和 APAC 技术共同构成了苹果生态系统的沉浸式媒体解决方案，为开发者提供了从采集到发布的完整工具链。无论是相机厂商、视频编辑软件开发者，还是希望尝试新型媒体格式的应用开发者，都可以充分利用这些技术创造引人入胜的沉浸式体验。

## 相关视频

[了解 Apple 沉浸视频技术](https://developer.apple.com/videos/play/wwdc2025/403)  
[探索 visionOS 的视频体验](https://developer.apple.com/videos/play/wwdc2025/304)  
[支持 visionOS App 播放沉浸视频](https://developer.apple.com/videos/play/wwdc2025/296)  
[空间网页的新功能](https://developer.apple.com/videos/play/wwdc2025/237)  
[AVQT 的新功能](https://developer.apple.com/videos/play/wwdc2022/10149)  
[使用高级视频质量工具评估视频](https://developer.apple.com/videos/play/wwdc2021/10145)  

## 文档

[Apple HEVC 立体视频互操作性配置文件](https://developer.apple.com/av-foundation/HEVC-Stereo-Video-Profile.pdf)  
[AVFoundation](https://developer.apple.com/documentation/AVFoundation)  
[Core Media](https://developer.apple.com/documentation/CoreMedia)  
[HTTP 直播流](https://developer.apple.com/documentation/HTTP-Live-Streaming)  
[Apple 设备的 HLS 创作规范](https://developer.apple.com/documentation/HTTP-Live-Streaming/hls-authoring-specification-for-apple-devices)  
[QuickTime 和 ISO 基础媒体文件格式及空间沉浸媒体](https://developer.apple.com/av-foundation/Stereo-Video-ISOBMFF-Extensions.pdf)  
[使用 Apple 的 HLS 工具](https://developer.apple.com/documentation/HTTP-Live-Streaming/using-apple-s-http-live-streaming-hls-tools)
> 此文章由AI生成，可能存在错误，如有问题，请联系[djs66256@163.com](djs66256@163.com)