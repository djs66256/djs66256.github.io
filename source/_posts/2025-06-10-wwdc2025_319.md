---
title: 在你的 App 中录制电影效果视频
date: 2025-06-10 15:48:35
categories:
- wwdc2025
tags:
- wwdc2025
- ios
- ipados
- 照片和相机
---
了解如何使用 cinematic video api，让你的 app 轻松拍摄大片感满屏的精彩视频。我们将介绍如何配置电影效果拍摄会话，并讲解构建视频拍摄 ui 的基本知识。我们还将探索高级电影效果功能，例如应用景深效果来实现动态跟踪拍摄和巧妙的焦点切换。
<!--more-->

![视频封面](https://devimages-cdn.apple.com/wwdc-services/images/3055294D-836B-4513-B7B0-0BC5666246B0/10068/10068_wide_250x141_2x.jpg)
[视频地址](https://developer.apple.com/cn/videos/play/wwdc2025/319/)

# 使用 Cinematic Video API 打造电影级视频拍摄体验

## 引言
电影效果视频是 iPhone 13 系列引入的突破性功能，它通过智能算法实现了专业电影中常见的焦点追踪和浅景深效果。如今，开发者可以通过全新的 Cinematic Video API 将这些强大的电影拍摄能力集成到自己的应用中，为用户带来专业级的视频创作体验。

## 电影效果视频的核心技术
电影效果视频的核心在于模拟传统电影的叙事工具：

- **定点对焦**：将观众注意力集中到关键主体
- **追踪对焦**：当主体移动时保持焦点清晰
- **智能切换**：当主体移出画面时自动切换焦点

这些原本需要专业跟焦员操作的技术，现在通过 Cinematic Video API 可以轻松实现。系统会自动检测画面主体，智能决定对焦策略，大幅降低了电影级视频的拍摄门槛。

## 配置电影效果拍摄会话
在 iOS 26 中，启用电影效果视频拍摄变得异常简单：

```swift
let videoInput = try! AVCaptureDeviceInput(device: camera)
captureSession.addInput(videoInput)
if videoInput.isCinematicVideoCaptureSupported {
    videoInput.isCinematicVideoCaptureEnabled = true
}
```

只需将 `isCinematicVideoCaptureEnabled` 设置为 true，系统就会自动配置以下输出：

1. **电影文件输出**：生成包含视差数据和元数据的 Cinematic 文件
2. **视频数据输出**：提供带有浅景深效果的帧数据
3. **预览层**：实时渲染虚化效果，构建取景器

## 构建完整的拍摄体验
我们通过 SwiftUI 构建了一个完整的电影效果拍摄界面：

```swift
@MainActor
struct CameraView: View {
    var body: some View {
        ZStack {
            CameraPreviewView()
            CameraControlsView()
        }
    }
}
```

### 关键功能实现
1. **设备与格式选择**：选取支持电影效果的相机设备和格式
2. **音频配置**：启用空间音频增强体验
3. **视频防抖**：使用电影级增强防抖模式
4. **元数据处理**：获取人脸检测等元数据并可视化

## 高级控制功能
API 提供了丰富的焦点控制方式：

```swift
// 追踪特定对象
open func setCinematicVideoTrackingFocus(detectedObjectID: Int, focusMode: AVCaptureDevice.CinematicVideoFocusMode)

// 追踪画面位置
open func setCinematicVideoTrackingFocus(at point: CGPoint, focusMode: AVCaptureDevice.CinematicVideoFocusMode)

// 固定焦点位置
open func setCinematicVideoFixedFocus(at point: CGPoint, focusMode: AVCaptureDevice.CinematicVideoFocusMode)
```

此外，开发者还可以：
- 调整虚化强度
- 检测光线不足场景
- 获取拍摄状态监控

## 结语
Cinematic Video API 将专业电影拍摄技术带到了移动应用开发中。通过简单的 API 调用，开发者就能为用户提供媲美专业电影制作的视频拍摄体验。期待看到更多应用利用这些功能，创造出令人惊艳的电影级视频作品。

## 相关视频
- [利用拍摄控件提升你的相机体验](https://developer.apple.com/videos/play/wwdc2025/253)
- [打造出色的锁定屏幕相机拍摄体验](https://developer.apple.com/videos/play/wwdc2024/10204)
- [在 iPadOS App 中支持外部摄像头](https://developer.apple.com/videos/play/wwdc2023/10106)
- [打造更流畅的相机体验](https://developer.apple.com/videos/play/wwdc2023/10105)
- [探索 tvOS 连续互通相机](https://developer.apple.com/videos/play/wwdc2023/10256)

## 文档
- [AVFoundation](https://developer.apple.com/documentation/AVFoundation)
- [Cinematic](https://developer.apple.com/documentation/Cinematic)
> 此文章由AI生成，可能存在错误，如有问题，请联系[djs66256@163.com](djs66256@163.com)