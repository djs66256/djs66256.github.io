---
title: 了解适用于 SwiftUI 的 WebKit
date: 2025-06-10 15:29:21
categories:
- wwdc2025
tags:
- wwdc2025
- ios
- ipados
- macos
- visionos
- safari-浏览器和网页
---
了解如何使用 webkit 将网页内容轻松整合到你的 swiftui app 中。了解如何载入和显示网页内容、与网页进行通信等。
<!--more-->

![视频封面](https://devimages-cdn.apple.com/wwdc-services/images/3055294D-836B-4513-B7B0-0BC5666246B0/9929/9929_wide_250x141_2x.jpg)
[视频地址](https://developer.apple.com/cn/videos/play/wwdc2025/231/)

# 在 SwiftUI 中无缝集成 WebKit：构建强大的网页应用体验

## 引言
随着 SwiftUI 的不断发展，苹果为开发者提供了更简单高效的方式来集成 WebKit 功能。无论您需要在应用中展示网页内容，还是实现复杂的网页交互，新的 WebKit API 都能满足您的需求。本文将带您深入了解如何利用这些新特性，构建功能丰富的应用。

## WebView 基础使用
全新的 `WebView` 组件让网页内容集成变得异常简单。只需创建一个 `WebView` 并指定 URL，就能在所有支持 WebKit 的平台展现精美网页内容。

```swift
WebView(url: URL(string: "https://www.apple.com")!)
```

如果需要动态切换 URL，WebView 会自动导航至新地址：

```swift
@State private var currentURL = URL(string: "https://www.apple.com")!

var body: some View {
    WebView(url: currentURL)
    Button("切换页面") {
        currentURL = URL(string: "https://developer.apple.com")!
    }
}
```

## 高级内容加载
当需要更复杂的交互时，可以创建 `WebPage` 实例并与 `WebView` 绑定：

```swift
struct ContentView: View {
    @State private var webPage = WebPage()
    
    var body: some View {
        WebView(page: webPage)
            .onAppear {
                webPage.load(URLRequest(url: URL(string: "https://www.apple.com")!))
            }
    }
}
```

加载内容的方式多样：
- 通过 `load` API 加载远程 URL
- 直接注入 HTML 字符串及基准 URL
- 加载 WebArchive 等数据类型（需指定 MIME 类型和编码）

## 本地资源管理
通过实现 `URLSchemeHandler` 协议，您可以轻松加载本地资源：

```swift
class LakesSchemeHandler: NSObject, URLSchemeHandler {
    func webView(_ webView: WebView, 
                start task: URLSchemeTask) {
        // 处理自定义 URL 请求
    }
    
    func webView(_ webView: WebView, 
                stop task: URLSchemeTask) {
        // 停止任务
    }
}

// 注册自定义 scheme
WebPage.registerURLSchemeHandler(
    LakesSchemeHandler(),
    forURLScheme: "lakes"
)
```

## 导航与交互控制
监听导航状态变化：

```swift
.onReceive(webPage.currentNavigationEvent) { event in
    switch event {
    case .startedProvisionalNavigation:
        print("导航开始")
    case .finish:
        print("导航完成")
    // 其他情况处理...
    }
}
```

通过 `callJavaScript` API 执行 JS 代码：

```swift
webPage.callJavaScript("document.title") { result in
    switch result {
    case .success(let value):
        print("返回值：\(value)")
    case .failure(let error):
        print("错误：\(error)")
    }
}
```

## 视图修饰与定制
WebView 提供丰富的修饰符来优化体验：

```swift
WebView(url: url)
    .scrollBounceBehavior(.always)
    .findNavigator()
    .webViewScrollPosition($scrollPosition)
```

## 结语
SwiftUI 中的 WebKit 新 API 提供了简单易用的网页内容集成方案，同时支持高级定制功能。无论您需要基本的网页展示，还是复杂的交互控制，这些新工具都能帮助您构建出色的用户体验。

立即尝试这些新特性，并将 WebKit 的强大功能整合到您的 SwiftUI 应用中吧！

## 相关视频
- [使用 WebGPU 解锁 GPU 计算能力](https://developer.apple.com/videos/play/wwdc2025/236)
- [空间网页的新功能](https://developer.apple.com/videos/play/wwdc2025/237)
- [Safari 浏览器和 WebKit 的新功能](https://developer.apple.com/videos/play/wwdc2025/233)
- [Swift 的新功能](https://developer.apple.com/videos/play/wwdc2025/245)
- [SwiftUI 的新功能](https://developer.apple.com/videos/play/wwdc2025/256)

## 文档资源
- [SwiftUI 官方文档](https://developer.apple.com/documentation/SwiftUI)
> 此文章由AI生成，可能存在错误，如有问题，请联系[djs66256@163.com](djs66256@163.com)