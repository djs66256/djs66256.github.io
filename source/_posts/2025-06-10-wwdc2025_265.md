---
title: 深入了解写作工具
date: 2025-06-10 15:27:26
categories:
- wwdc2025
tags:
- wwdc2025
- ios
- ipados
- macos
- visionos
- app-服务
---
借助写作工具，用户可以直接在你的 app 内进行文本校对、改写和转换。了解为你的 app 自定写作工具的高级技巧。探索众多格式选项，以及如何在富文本编辑中加以利用。如果你使用自定文本引擎，欢迎了解如何无缝整合完整的写作工具体验，以便用户直接在文本视图中进行修改。
<!--more-->

![视频封面](https://devimages-cdn.apple.com/wwdc-services/images/3055294D-836B-4513-B7B0-0BC5666246B0/9964/9964_wide_250x141_2x.jpg)
[视频地址](https://developer.apple.com/cn/videos/play/wwdc2025/265/)

# 深入解析写作工具：从基础集成到高级定制  

## 引言  

在现代应用中，文本处理能力直接影响用户体验。Apple推出的写作工具（Writing Tools）为开发者提供了一套强大的文本处理解决方案，支持校对、改写和总结等核心功能。本文将带你深入了解写作工具的最新特性、原生文本视图定制技巧、富文本格式支持，以及如何为自定义文本引擎整合完整的写作工具体验。

## 写作工具新特性  

今年的写作工具迎来多项重要更新：  

- **AI增强**：通过ChatGPT集成，用户只需简单指令即可生成内容或创建图像  
- **跨平台支持**：现已完美适配visionOS，覆盖邮件、备忘录及第三方应用场景  
- **智能调整**：在iOS/iPadOS/macOS 26中，用户完成文本改写后可追加风格要求（如"更温暖"或"更口语化"）  
- **自动化支持**：新增快捷指令功能，结合Apple Intelligence可自动执行校对和改写操作  

开发者现在可以使用新API：  
- 获取系统工具栏按钮和标准菜单项  
- 让写作工具返回富文本的呈现意图  
- 将写作工具协调器整合到自定义文本引擎  

## 原生文本视图定制  

系统原生文本视图默认支持写作工具。开发者可以通过以下方式优化体验：  

- 使用生命周期方法响应写作工具操作  
- 通过`Writing Tools Result Options`（原Allowed Input Options）管理格式支持  
- 指定禁止改写的文本范围  

对于以文本编辑为核心的应用（如备忘录），建议：  
```swift
// UIKit示例
let writingToolItem = UIBarButtonItem.writingToolsItem()
toolbarItems?.append(writingToolItem)

// AppKit示例
let item = NSToolbarItem.writingToolsItem()
toolbar.insertItem(withItemIdentifier: .writingTools, at: 0)
```

## 富文本格式支持  

写作工具支持三种文本视图类型：  

1. **纯文本视图**：使用`.plainText`选项  
2. **富文本视图**：使用`.richText`选项（可附加`.list`和`.table`）  
3. **语义格式视图**：使用`.richText`+`.presentationIntent`组合  

重要区别：  
- **显示属性**：如粗体/斜体等直接样式  
- **呈现意图**：传递标题/列表等语义信息，需应用自行转换为具体样式  

## 自定义文本引擎整合  

对于完全自定义的文本引擎，今年新增的协调器API可实现深度集成：  

1. 创建并绑定`WritingToolsCoordinator`  
2. 通过代理方法提供文本上下文  
3. 处理文本替换请求  
4. 实现动画预览和校对标记  
5. 同步编辑状态  

示例工作流程：  
```swift
// 绑定协调器
let coordinator = WritingToolsCoordinator()
textView.addInteraction(coordinator)

// 处理文本变更
func coordinator(_ coordinator: WritingToolsCoordinator, 
                replaceTextIn range: NSRange, 
                with replacement: NSAttributedString) {
    // 更新文本存储
    textStorage.replaceCharacters(in: range, with: replacement)
}
```

## 结论与下一步  

写作工具为应用文本处理提供了强大而灵活的解决方案。建议开发者：  

- 尝试新推出的改写追加调整功能  
- 为文本密集型应用添加专用工具栏按钮  
- 探索语义格式支持可能性  
- 参考示例项目实现自定义引擎集成  

## 相关视频  

- [开始使用 Writing Tools](https://developer.apple.com/videos/play/wwdc2024/10168)  

## 文档  

- [Writing Tools官方文档](https://developer.apple.com/documentation/UIKit/writing-tools)
> 此文章由AI生成，可能存在错误，如有问题，请联系[djs66256@163.com](djs66256@163.com)