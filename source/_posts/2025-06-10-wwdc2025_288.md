---
title: 将 SceneKit 项目移植到 RealityKit
date: 2025-06-10 21:46:48
categories:
- wwdc2025
tags:
- wwdc2025
- ios
- ipados
- macos
- tvos
- visionos
- 图形和游戏
---
了解为什么要弃用 scenekit，并探索如何将你的 3d 项目迁移至 realitykit 这一 apple 推荐的高级 3d 引擎。我们将阐明弃用 scenekit 对你的项目意味着什么，比较这两个引擎之间的关键概念，并向你展示如何将一个示例 scenekit 游戏移植到 realitykit。我们还将探讨 realitykit 在所有受支持平台上拥有的巨大潜力，以帮助你为 app 和游戏打造出精彩的 3d 体验。
<!--more-->

![视频封面](https://devimages-cdn.apple.com/wwdc-services/images/3055294D-836B-4513-B7B0-0BC5666246B0/10010/10010_wide_250x141_2x.jpg)
[视频地址](https://developer.apple.com/cn/videos/play/wwdc2025/288/)
> 此文章由AI生成，可能存在错误，如有问题，请联系[djs66256@163.com](djs66256@163.com)

# 从 SceneKit 到 RealityKit：3D 项目的现代化迁移指南

SceneKit 作为 Apple 平台上的原生 3D 引擎，曾为开发者提供了创建 3D 应用的便捷途径。随着技术演进和生态发展，Apple 现已正式在所有平台上弃用 SceneKit，并推荐开发者迁移至其现代化高级 3D 引擎 RealityKit。本文将深入解析这一过渡的技术细节和实践方法。

## 引言：SceneKit 的现状与未来

SceneKit 的历史可以追溯到 13 年前的 OS X Mountain Lion 时代。多年来，它为开发者提供了可靠的 3D 渲染能力，包括著名的"Max the Panda"示例游戏。然而，随着 Apple 生态系统的发展变化，SceneKit 的架构已难以在不破坏现有应用的前提下持续更新。

此次弃用属于"软弃用"，意味着：
- 现有 SceneKit 应用仍可正常运行
- 不会强制要求立即重写代码
- 仅会修复关键错误，不再提供新功能

对于新开发项目，RealityKit 已成为 Apple 平台上的首选 3D 引擎，它被广泛应用于系统功能和第三方应用中，如 Quick Look 3D 预览、App Store 立体图标等，特别是在 visionOS 中扮演着核心角色。

## 核心架构对比

### 节点式 vs 实体组件系统

SceneKit 采用传统的节点式架构：
- 场景中的每个对象都是一个节点(SCNNode)
- 通过节点的预定义属性控制行为
- 功能集成在同一节点上(几何体、动画、音频等)

而 RealityKit 采用的是现代实体组件系统(ECS)：
- 每个场景对象都是实体(Entity)
- 通过附加组件(Component)定义行为
- 功能模块化，更加灵活

### 坐标系与资产格式

两种引擎在坐标系上保持一致：
- x 轴向右
- y 轴向上
- z 轴朝向相机

但在资产格式上，SceneKit 使用专有的 SCN 格式，而 RealityKit 采用行业标准 USD(Universal Scene Description)格式，这有助于资产在不同工具间的交换和协作。

### 视图系统差异

SceneKit 提供多种视图：
- SCNView
- SwiftUI 的 SceneView
- ARSCNView(用于 ARKit)

RealityKit 则统一使用 RealityView：
- 专为 SwiftUI 设计
- 支持从纯虚拟场景到现实世界对象放置
- 自动适应所有 Apple 平台

## 资产转换与场景构建

### 资产格式转换

将现有 SceneKit 资产迁移到 RealityKit 有两种主要方法：

1. **Xcode 图形化导出**：
   通过文件菜单将 SCN 资产导出为 USDZ 格式

2. **命令行工具**：
   使用 Xcode 26 中的 scntool 进行转换，特别是对于包含动画的资产：
   ```bash
   xcrun scntool --convert max.scn --format usdz --append-animation max_spin.scn
   ```

### 场景构建工具

从 Xcode 的场景编辑器转向 Reality Composer Pro：
- 组合场景
- 添加/编辑组件
- 创建材质与着色器
- 准备最终场景

在 SwiftUI 中加载场景变得非常简单：
```swift
import RealityKit
import PyroPanda // 场景包

RealityView { content in
    let scene = try! await Entity(named: "Scene", in: pyroPandaBundle)
    content.add(scene)
}
```

## 关键功能实现对比

### 动画系统

RealityKit 通过 AnimationLibraryComponent 管理动画，播放方式更加简洁：
```swift
guard let max = scene.findEntity(named: "Max"),
      let library = max.components[AnimationLibraryComponent.self],
      let spin = library.animations["spin"] 
else { return }

max.playAnimation(spin)
```

### 光照系统

RealityKit 提供更灵活的光照选项，包括带阴影的定向光：
```swift
Entity(components:
    DirectionalLightComponent(),
    DirectionalLightComponent.Shadow()
)
```

### 音频系统

音频配置可以在 Reality Composer Pro 中预制，播放方式有两种：
```swift
// 直接播放
terrain.playAudio(audioResource)

// 使用实体动作
terrain.playAnimation(PlayAudioAction.targeted(...))
```

### 视觉特效实现

粒子系统和后处理特效在 RealityKit 中得到了显著增强：
```swift
final class BloomPostProcess: PostProcessEffect {
    func postProcess(context: PostProcessEffectContext) {
        // 实现自定义泛光效果
    }
}

// 应用效果
content.renderingEffects.customPostProcessing = .effect(BoomPostProcess())
```

## 多平台适配与未来展望

迁移后的 RealityKit 项目可以无缝运行于 iOS、iPadOS、macOS 和 tvOS 平台。特别在 visionOS 中，开发者可以利用渐进式沉浸视图创建独特的 3D 门户体验。

## 结论与学习资源

虽然 SceneKit 被弃用，但现有应用仍能继续运行。RealityKit 作为 Apple 3D 技术的未来，提供了：

- 现代 ECS 架构
- 行业标准 USD 支持
- 跨平台一致性
- 强大的创作工具链

开发者可以通过以下资源进一步学习：

[RealityKit 的新功能](https://developer.apple.com/videos/play/wwdc2025/287)  
[利用 RealityKit 音频让空间计算 App 更加引人入胜](https://developer.apple.com/videos/play/wwdc2024/111801)  
[在 Reality Composer Pro 中编写交互式 3D 内容](https://developer.apple.com/videos/play/wwdc2024/10102)  
[认识 Reality Composer Pro](https://developer.apple.com/videos/play/wwdc2023/10083)
