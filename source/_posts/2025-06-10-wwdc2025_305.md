---
title: 针对 visionOS 优化你的自定环境
date: 2025-06-10 21:46:48
categories:
- wwdc2025
tags:
- wwdc2025
- macos
- visionos
- 设计
---
探索如何使用程序化工具为你的 visionos app 或游戏创建精美的沉浸式环境。我们将分享创建高质量环境的构建要素，然后深入探讨优化流程。了解如何使用 apple 针对 houdini 提供的一整套流程，减少场景的多边形数量、进行几何清理、打包 uv 贴图，并创建 usd 素材以便导入到 reality composer pro 或你选择的游戏引擎中。
<!--more-->

![视频封面](https://devimages-cdn.apple.com/wwdc-services/images/3055294D-836B-4513-B7B0-0BC5666246B0/9960/9960_wide_250x141_2x.jpg)
[视频地址](https://developer.apple.com/cn/videos/play/wwdc2025/305/)
> 此文章由AI生成，可能存在错误，如有问题，请联系[djs66256@163.com](djs66256@163.com)

# 为 visionOS 优化你的自定义环境：打造沉浸式体验的技术解析

在空间计算时代，为 Apple Vision Pro 创建沉浸式环境面临着独特的挑战与机遇。本文将深入解析如何通过程序化工具链构建高质量环境，实现电影级视觉效果与实时性能的完美平衡。

## 沉浸式环境的核心挑战

Vision Pro 平台提供了超高分辨率、快速帧率和无缝实时交互能力，为开发者创造了打造真正临场感环境的绝佳机会。然而，高保真实时渲染往往伴随着高昂的性能代价——柔和的阴影、全局光照和复杂着色等效果都会消耗大量计算资源。

Alex 在 WWDC24 演讲中提出的解决方案并非依赖单一技术，而是采用一套灵活的工作流程：

1. 从预渲染图像开始，捕捉电影级光照、丰富细节和高端材质
2. 根据观看者实际体验优化几何体和纹理
3. 将预渲染图像应用到优化后的环境
4. 在实时编辑器（如 Reality Composer 或 Unity）中完成组装

## 环境优化的关键技术

### 几何优化：从1亿到20万多边形

面对如月球场景这样包含1亿多边形的复杂环境，演讲中展示了三项突破性的优化技术：

#### 1. 自适应多边形缩减

传统LOD系统简化单个资产的方案在这里被超越。通过基于沉浸边界内可能视点的优化方案：
- 使用增强版Houdini PolyReduce工具
- 通过属性驱动参数和边界采样点评估几何重要性
- 保持细节密度自然渐变，避免突兀变化
- 月球场景多边形从1亿降至35万

#### 2. 几何广告牌技术

对于1公里外的远景对象：
- 转化为朝向沉浸边界的平面几何体
- 通过Vista Billboard HDA工具生成简化剪影
- 避免使用透明材质的情况下大幅减少多边形
- 月球环境中选择1公里分界点以优化资源分配

#### 3. 遮挡剔除

双重剔除方案显著提升效率：
- 背面剔除：移除永远不可见的背面多边形（月球场景移除6万）
- 遮挡剔除：通过射线测试移除完全遮挡的三角形（额外移除11万）
- 合计移除约50%剩余三角形，最终控制在18万

### UV与纹理优化：保留细节的艺术

为在优化几何体上保留高精度PBR贴图细节，采用了创新的UV策略：

- 沉浸边界内（5米）：基于面积的UV映射，确保纹理密度一致
- 沉浸边界外：切换为基于屏幕空间的投影映射
- 使用Mesh Partition HDA分割网格为最小可见单元
- Multi-Projection HDA从各分区最佳视角投射UV
- 最终压缩到两张纹理：边界内面积缩放，边界外屏幕空间缩放

### 纹理烘焙：从数十GB到200MB

通过组合球形渲染和表面投影技术：
- 临时球形投影映射渲染到几何体
- 烘焙至最终UV布局
- 单视角缺失数据问题通过表面投影解决
- 实现数十GB高分辨率纹理压缩至不足200MB

## USD设置与最终优化

精心设计的USD结构开启最终优化阶段：
- 层次划分实现高效视锥剔除
- 边界内使用Boundary Partition HDA
- 边界外使用Frustum Partition HDA分割为渐进式区块
- 导出前仅保留必要属性（名称属性、组分配）

最终成果令人印象深刻：
- 多边形：1亿→20万（实际每帧仅渲染约10万）
- 纹理内存：控制在250MB以内
- 实体数量：<200个
- 单帧绘制调用：通常<100次

## 应用场景与工具适配性

这套工作流程经过精心设计，可适应多种场景需求：
- 门户体验：调整遮挡剔除参数
- 多沉浸边界场景：通过多组采样点优化
- 适用场景类型：
  - 岩石地貌（月球、约书亚树）
  - 大气景观（胡德山、哈雷阿卡拉）
  - 硬表面室内（会议室、剧院）

对于不同场景需求，可灵活调整优化重点。例如复杂着色器场景可相应缩减几何体，而高效建模环境则无需重度优化。

## 开发者资源与核心启示

随附的示例项目包含完整工作流程和工具，README文件提供详细说明。核心启示在于：高保真内容不必昂贵。将优化思维融入创作过程，借助强大工具链，开发者可以突破可能性边界，打造更具沉浸感的Vision Pro环境。

相关视频：
[为你的沉浸式 visionOS App 创建自定环境](https://developer.apple.com/videos/play/wwdc2024/10087)
[为空间计算优化 3D 素材资源](https://developer.apple.com/videos/play/wwdc2024/10186)
[在自定环境中提升媒体观赏体验的沉浸度](https://developer.apple.com/videos/play/wwdc2024/10115)
[探索 USD 生态系统](https://developer.apple.com/videos/play/wwdc2023/10086)
