---
title: 利用拍摄控件提升你的相机体验
date: 2025-06-10 21:46:48
categories:
- wwdc2025
tags:
- wwdc2025
- ios
- ipados
- 照片和相机
---
了解如何为你的相机体验自定拍摄控件。我们将向你展示如何使用各种实体拍摄控件 (包括新增的 airpods 支持) 拍摄照片，以及如何使用相机控制来调整设置。
<!--more-->

![视频封面](https://devimages-cdn.apple.com/wwdc-services/images/3055294D-836B-4513-B7B0-0BC5666246B0/10051/10051_wide_250x141_2x.jpg)
[视频地址](https://developer.apple.com/cn/videos/play/wwdc2025/253/)
> 此文章由AI生成，可能存在错误，如有问题，请联系[djs66256@163.com](djs66256@163.com)

# 利用拍摄控件提升相机体验

在WWDC 2024技术分享中，苹果工程师详细介绍了如何利用拍摄控件API为相机应用构建更丰富的交互体验。本文将系统梳理这些创新功能，包括物理按键控制、AirPods远程拍摄以及iPhone 16相机控制功能等核心技术。

## 物理拍摄控制概述

AVCaptureEventInteraction API为开发者提供了将物理按键映射到相机操作的强大能力。该技术允许用户通过音量键、操作按钮等硬件控制直接触发拍照或录像功能，无需依赖屏幕触控。

iOS系统通过三个阶段精确捕捉物理按键的整个按压生命周期：
- began阶段标识按键按下时刻
- cancelled阶段处理意外中断
- ended阶段对应按键释放动作

## 关键技术实现

在SwiftUI环境中，开发者可以通过onCameraCaptureEvent视图修饰符轻松实现物理按键控制。以下代码展示了如何构建基础拍摄功能：

```swift
.onCameraCaptureEvent { event in
    if event.phase == .ended {
       camera.capturePhoto()
    }
}
```

值得注意的是，API区分了主次操作按键。主操作由音量减小键、操作键和相机控制键触发，而次操作则专属音量增大键。这种设计既保证了操作逻辑的清晰性，又为不同拍摄场景提供了灵活性。

## AirPods远程控制创新

iOS 26引入了通过AirPods进行远程相机控制的新功能。配备H2芯片的AirPods可以通过耳柄点击触发拍摄操作，为使用者带来全新的远程拍摄体验。

系统提供了默认的音频反馈机制，但开发者也可以根据应用场景进行自定义：

```swift
.onCameraCaptureEvent(defaultSoundDisabled: true) { event in
    if event.phase == .ended {
        if event.shouldPlaySound {
            event.play(.cameraShutter)
        }
    }
    camera.capturePhoto()
}
```

该功能特别适合需要远距离拍摄的场景，如团体合影或野生动物摄影，大大扩展了iPhone相机的使用场景。

## iPhone 16相机控制功能

iPhone 16引入的相机控制功能将物理硬件与软件体验完美结合。该功能支持三种主要操作模式：
1. 点击启动相机应用
2. 作为快门按钮使用
3. 通过滑动进行快速参数调整

系统提供了两种控制类型供开发者使用：
- 数值滑块（包括连续型和离散型）
- 列表选择器

以下代码展示了如何在应用中添加系统预置的变焦控制：

```swift
let zoomControl = AVCaptureSystemZoomSlider(device: device) { [weak self] zoomFactor in
    self?.updateUI(zoomFactor: zoomFactor)
}
```

对于需要自定义控制的场景，开发者可以创建效果选择器等个性化交互元素。关键是要确保控制逻辑与拍摄体验紧密相关，避免引入不必要的复杂性。

## 最佳实践与注意事项

在实现拍摄控件时，开发者需要注意以下几点：
1. 必须正确处理所有事件阶段，避免按键失效
2. 后台应用不会接收拍摄事件
3. 自定义音频反馈应符合场景需求
4. 相机控制应专注于影响拍摄效果的参数
5. 需考虑UI与硬件控制的同步问题

## 开发资源与参考

苹果开发者网站提供了丰富的相关资源，包括：
- 相机控制的人机界面指南
- AirPods测试配置指南
- 多种示例代码和技术文档

通过合理运用这些API和技术，开发者可以为用户打造媲美原生相机应用的优质体验，充分利用iPhone的硬件优势和创新功能。

## 相关视频

[打造出色的锁定屏幕相机拍摄体验](https://developer.apple.com/videos/play/wwdc2024/10204)  
[在 iPadOS App 中支持外部摄像头](https://developer.apple.com/videos/play/wwdc2023/10106)  
[探索 tvOS 连续互通相机](https://developer.apple.com/videos/play/wwdc2023/10256)  

## 文档资源

[Accessing the camera while multitasking](https://developer.apple.com/documentation/avkit/accessing_the_camera_while_multitasking)  
[AVFoundation](https://developer.apple.com/documentation/AVFoundation)  
[Capture setup](https://developer.apple.com/documentation/AVFoundation/capture-setup)  
[Capturing Photos with Depth](https://developer.apple.com/documentation/AVFoundation/capturing-photos-with-depth)  
[Creating a camera experience for the Lock Screen](https://developer.apple.com/documentation/LockedCameraCapture/Creating-a-camera-experience-for-the-Lock-Screen)  
[Creating a camera extension with Core Media I/O](https://developer.apple.com/documentation/coremediaio/creating_a_camera_extension_with_core_media_i_o)  
[DockKit](https://developer.apple.com/documentation/DockKit)  
[Scanning data with the camera](https://developer.apple.com/documentation/VisionKit/scanning-data-with-the-camera)  
[Supporting Continuity Camera in your tvOS app](https://developer.apple.com/documentation/AVKit/supporting-continuity-camera-in-your-tvos-app)
